<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>SCREEN Disassembly</title>

    <meta content="en-us" http-equiv="Content-Language" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta name="description" content="SourceGen-generated disassembly of SCREEN" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="SGStyle.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <p style="font-size:smaller;"><a href="./">(back to project page)</a></p>
    <h1>SCREEN Disassembly</h1>

    <div id="code-lines">
        <!-- The CodeLines marker is not optional, and may only appear once -->
<pre>                   ; 6502bench SourceGen v1.7.3
                   <a name="SymPLAYER_Genaa">PLAYER_Genaa</a>          .eq     $01    {const}
                   <a name="Symitem_honeyLamp">item_honeyLamp</a>        .eq     $02    {const}
                   <a name="SymPLAYER_Herd">PLAYER_Herd</a>           .eq     $02    {const}
                   <a name="SymRWTSCMD_write">RWTSCMD_write</a>         .eq     $02    {const}
                   <a name="Symitem_wand">item_wand</a>             .eq     $03    {const}
                   <a name="SymPLAYER_Pomma">PLAYER_Pomma</a>          .eq     $03    {const}
                   <a name="SymPLAYER_Charn">PLAYER_Charn</a>          .eq     $04    {const}
                   <a name="Symitem_shuba">item_shuba</a>            .eq     $07    {const}
                   <a name="Symitem_beak">item_beak</a>             .eq     $09    {const}
                   <a name="Symitem_rope">item_rope</a>             .eq     $0b    {const}
                   <a name="Symitem_templeKey">item_templeKey</a>        .eq     $0c    {const}
                   <a name="SymLASTKEY">LASTKEY</a>               .eq     $02                     ;last key pressed via chkkey
                   <a name="Symtemp08">temp08</a>                .eq     $08
                   <a name="Symtemp11_textlo">temp11_textlo</a>         .eq     $11                     ; often used to hold text page address of tile (lo)
                   <a name="SymplayerX">playerX</a>               .eq     $19                     ; tile X of player
                   <a name="SymplayerY">playerY</a>               .eq     $1a                     ; tile Y of player
                   <a name="SymMAPPOS">MAPPOS</a>                .eq     $1b                     ; playfield position
                   <a name="SymMAPHALF">MAPHALF</a>               .eq     $1c                     ; playfield half (top/bottom); like top bit of MAPPOS
                   <a name="SymPLAYER">PLAYER</a>                .eq     $20                     ;active player (0-4)
                   <a name="SymdayNum">dayNum</a>                .eq     $22                     ; day number (1-based)
                   <a name="SymlevelSpirit">levelSpirit</a>           .eq     $23                     ; level of spirit
                   <a name="SymlevelFood">levelFood</a>             .eq     $24                     ; level of food, max limit-1
                   <a name="SymlevelRest">levelRest</a>             .eq     $25                     ; level of rest, max limit-1
                   <a name="SymlimitSpirit">limitSpirit</a>           .eq     $27                     ; spirit limit
                   <a name="SymMON_BASL">MON_BASL</a>              .eq     $28                     ;base address for text output (lo)
                   <a name="SymlimitFood">limitFood</a>             .eq     $2a                     ; not shown, levelStamina/2 + 1
                   <a name="SymlimitRest">limitRest</a>             .eq     $2b                     ; not shown, levelStamina/2 + 1
                   <a name="SymmaxWeight">maxWeight</a>             .eq     $2c                     ; max weight you can carry
                   <a name="SymhomePos">homePos</a>               .eq     $2d                     ; used when teleporting player home
                   <a name="SymhomeHalf">homeHalf</a>              .eq     $2e                     ; used when teleporting player home
                   <a name="SymhomeX">homeX</a>                 .eq     $2f                     ; used when teleporting player home
                   <a name="SymhomeY">homeY</a>                 .eq     $30                     ; used when teleporting player home
                   <a name="SymMON_INVFLAG">MON_INVFLAG</a>           .eq     $32                     ;text mask (255=normal, 127=flash, 63=inv)
                   <a name="SymMON_PROMPT">MON_PROMPT</a>            .eq     $33                     ;prompt character
                   <a name="SymspokeTo">spokeTo</a>               .eq     $37                     ; spoke to or bought from NPC while on this screen
                   <a name="SymfallaKeyOffered">fallaKeyOffered</a>       .eq     $38                     ; if D'Ol Falla's key has been offered (?)
                   <a name="SymsuppressSound0">suppressSound0</a>        .eq     $39                     ; $FF=suppress sound 0 for 1 call, set on inventory menu entry
                   <a name="SymlitLamp">litLamp</a>               .eq     $3a                     ; slot number of lit lamp, or 0 if unlit
                   <a name="SymgainSpirit">gainSpirit</a>            .eq     $3f                     ; spirit gained so far, modulo 5
                   <a name="SymMON_A3H">MON_A3H</a>               .eq     $41                     ;general purpose
                   <a name="SymMON_A4L">MON_A4L</a>               .eq     $42                     ;general purpose
                   <a name="SymlampFuel">lampFuel</a>              .eq     $44                     ; number of rooms left in lamp; 00..13
                   <a name="SymMON_A5H">MON_A5H</a>               .eq     $45                     ;general purpose
                   <a name="Symtemp49">temp49</a>                .eq     $49                     ; used only in $A7F3
                   <a name="SymSOUNDFLG">SOUNDFLG</a>              .eq     $4a                     ;0 = sound off, 1 = on
                   <a name="SymHTAB">HTAB</a>                  .eq     $64                     ; horiz text pos (next line at +$28)
                   <a name="SymINSIDE">INSIDE</a>                .eq     $67                     ; Are we inside? Toggled when entering a door, or set manually on teleport.
                   <a name="Symzp6b_npcHere">zp6b_npcHere</a>          .eq     $6b                     ; NPC is on this screen? (0=no, 1=yes)
                   <a name="SymnpcX">npcX</a>                  .eq     $6c                     ; NPC X location on this screen
                   <a name="SymnpcY">npcY</a>                  .eq     $6d                     ; NPC Y location on this screen
                   <a name="SymnpcFacing">npcFacing</a>             .eq     $6f                     ; NPC facing direction on this screen
                   <a name="SymWEIGHT">WEIGHT</a>                .eq     $70                     ; current item weight carried (&lt; limitWeight)
                   <a name="Symtemp75">temp75</a>                .eq     $75
                   <a name="Symtemp76">temp76</a>                .eq     $76
                   <a name="SymselItemSlot">selItemSlot</a>           .eq     $77                     ; last selected item slot (00..FE or FF)
                   <a name="SymselItemNum">selItemNum</a>            .eq     $78                     ; last selected item number (01..0E)
                   <a name="SymwaitMelody">waitMelody</a>            .eq     $83                     ; always 0, but could be interrupt placeholder
                   <a name="SymVIRTBTN">VIRTBTN</a>               .eq     $84                     ; virtual button press, used only in kbd handler
                   <a name="SymXDIR">XDIR</a>                  .eq     $85                     ;last x dir pressed, -1 (left) or 1 (right)
                   <a name="SymYDIR">YDIR</a>                  .eq     $86                     ;last y dir pressed, -1 (up) or 1 (down)
                   <a name="SymTICKING">TICKING</a>               .eq     $87                     ; 1 if timer is ticking, 0 if paused
                   <a name="Symtemp89">temp89</a>                .eq     $89    {addr/2}
                   <a name="SymFACING">FACING</a>                .eq     $95                     ;FF=left, 01=right facing
                   <a name="SymMOVING">MOVING</a>                .eq     $a2                     ;1=moving,0=stationary
                   <a name="SymXMOVFLG">XMOVFLG</a>               .eq     $af
                   <a name="SymYMOVFLG">YMOVFLG</a>               .eq     $b0                     ;FF=up,01=down (edge at end of action)
                   <a name="SymJOYFLG">JOYFLG</a>                .eq     $b1                     ;01 = joystick, 00 = kbd
                   <a name="SymfoodRestTimer">foodRestTimer</a>         .eq     $b8                     ; remaining time until food/rest decreases
                   <a name="SymDEMOWAIT">DEMOWAIT</a>              .eq     $c0                     ; number of frames to wait
                   <a name="SymDEMOLAST">DEMOLAST</a>              .eq     $c1                     ; latched movement byte
                   <a name="SymDEMOPTR">DEMOPTR</a>               .eq     $c2                     ; ptr to current demo byte
                   <a name="SymDEMOFLG">DEMOFLG</a>               .eq     $c4                     ; 00 = game, 01 = demo mode
                   <a name="SymDEMOTEXT">DEMOTEXT</a>              .eq     $c8                     ; demo text to show (1..5, or 0 = none)
                   <a name="SymQUEST">QUEST</a>                 .eq     $da                     ; quest (save slot) 0..4
                   <a name="SymtileUnder">tileUnder</a>             .eq     $e3                     ;  0, 1 tile under player's feet
                   <a name="SymySolid">ySolid</a>                .eq     $f0                     ; selected tile is solid ground
                   <a name="SymSTACK_npc_offer">STACK_npc_offer</a>       .eq     $0100                   ; vector -- bytes corrupt
                   <a name="SymSTACK_need_energy">STACK_need_energy</a>     .eq     $0103                   ; vector -- bytes corrupt
                   <a name="SymRWTSBUF">RWTSBUF</a>               .eq     $0200  {addr/256}       ; 256-byte sector r/w buffer
                   <a name="SymRWTSBUF_npc">RWTSBUF_npc</a>           .eq     $02e1                   ; nonzero if NPC is present; may contain data in top 4 bits
                   <a name="SymRWTSBUF_npc_speak_top1">RWTSBUF_npc_speak_top1</a> .eq    $02e8                   ; NPC spoken msg part 1 (variant 1)
                   <a name="SymRWTSBUF_npc_speak_bot1">RWTSBUF_npc_speak_bot1</a> .eq    $02e9                   ; NPC spoken msg part 2 (variant 1)
                   <a name="SymRWTSBUF_npc_pense_emot1">RWTSBUF_npc_pense_emot1</a> .eq   $02ea                   ; NPC pense emotion number (variant 1), 1-based
                   <a name="SymRWTSBUF_npc_pense_mesg1">RWTSBUF_npc_pense_mesg1</a> .eq   $02eb                   ; NPC pense message number (variant 1), 1-based
                   <a name="SymRWTSBUF_npc_speak_top2">RWTSBUF_npc_speak_top2</a> .eq    $02ec                   ; NPC spoken msg part 1 (variant 2)
                   <a name="SymRWTSBUF_npc_speak_bot2">RWTSBUF_npc_speak_bot2</a> .eq    $02ed                   ; NPC spoken msg part 2 (variant 2)
                   <a name="SymRWTSBUF_npc_pense_emot2">RWTSBUF_npc_pense_emot2</a> .eq   $02ee                   ; NPC pense emotion number (variant 2), 1-based
                   <a name="SymRWTSBUF_npc_pense_mesg2">RWTSBUF_npc_pense_mesg2</a> .eq   $02ef                   ; NPC pense message number (variant 2), 1-based
                   <a name="SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>        .eq     $02f1                   ; NPC number (00..??)  ; $49 raamo
                   <a name="SymRWTSBUF_npctype">RWTSBUF_npctype</a>       .eq     $02f2                   ; 0 offers item, 1 animal, $d0 dol falla, $40 gain level, $20-$2f ??, $c0 door 1, $c1 door 2, $e0-$ef,
                   <a name="SymRWTS_IOB_track">RWTS_IOB_track</a>        .eq     $0304
                   <a name="SymRWTS_IOB_sector">RWTS_IOB_sector</a>       .eq     $0305
                   <a name="SymRWTS_IOB_command">RWTS_IOB_command</a>      .eq     $030c
                   <a name="SymDIRECT_RWTS">DIRECT_RWTS</a>           .eq     $0315
                   <a name="SymGAME1_messages">GAME1_messages</a>        .eq     $0a00
                   <a name="SymGAME1_power_gained">GAME1_power_gained</a>    .eq     $1b00
                   <a name="SymGAME1_BITTAB0">GAME1_BITTAB0</a>         .eq     $1db8
                   <a name="SymGAME1_BITTAB5">GAME1_BITTAB5</a>         .eq     $1dbd
                   <a name="SymGAME1_BITTAB7">GAME1_BITTAB7</a>         .eq     $1dbf
                   <a name="SymGAME1_melodies_lo">GAME1_melodies_lo</a>     .eq     $1e20
                   <a name="SymGAME1_melodies_hi">GAME1_melodies_hi</a>     .eq     $1e30
                   <a name="SymGAME2_drawtile">GAME2_drawtile</a>        .eq     $6003
                   <a name="SymGAME2_cleartext">GAME2_cleartext</a>       .eq     $6006
                   <a name="SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>         .eq     $600c
                   <a name="SymGAME2_printchar">GAME2_printchar</a>       .eq     $600f
                   <a name="SymGAME2_delay1">GAME2_delay1</a>          .eq     $6012
                   <a name="SymGAME2_swapzp8">GAME2_swapzp8</a>         .eq     $6015
                   <a name="SymGAME2_read_playfield">GAME2_read_playfield</a>  .eq     $601e
                   <a name="SymGAME2_read_0900">GAME2_read_0900</a>       .eq     $6021
                   <a name="SymGAME2_intro">GAME2_intro</a>           .eq     $6027
                   <a name="SymGAME2_copypages">GAME2_copypages</a>       .eq     $6030
                   <a name="SymGAME2_clearpages">GAME2_clearpages</a>      .eq     $6033
                   <a name="SymGAME2_delay2">GAME2_delay2</a>          .eq     $6036
                   <a name="SymGAME2_player_init">GAME2_player_init</a>     .eq     $6039
                   <a name="SymGAME2_init_item_state">GAME2_init_item_state</a> .eq     $603f
                   <a name="SymGAME2_calc_hires_textpos">GAME2_calc_hires_textpos</a> .eq  $6042
                   <a name="SymGAME2_writetile">GAME2_writetile</a>       .eq     $6045
                   <a name="SymGAME2_draw_player">GAME2_draw_player</a>     .eq     $6b03
                   <a name="SymGAME2_ongoing_input">GAME2_ongoing_input</a>   .eq     $6b09
                   <a name="SymGAME2_redraw_player">GAME2_redraw_player</a>   .eq     $6b0c
                   <a name="SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>      .eq     $6b1e
                   <a name="SymGAME2_win_game">GAME2_win_game</a>        .eq     $6b24
                   <a name="SymGAME2_chkkey">GAME2_chkkey</a>          .eq     $6b27
                   <a name="SymGAME2_menu_input">GAME2_menu_input</a>      .eq     $6b2a
                   <a name="SymGAME2_slot_to_item">GAME2_slot_to_item</a>    .eq     $7703
                   <a name="SymGAME2_message_wait">GAME2_message_wait</a>    .eq     $7706
                   <a name="SymGAME2_await_button_up">GAME2_await_button_up</a> .eq     $770c
                   <a name="SymGAME2_print_item_desc">GAME2_print_item_desc</a> .eq     $770f
                   <a name="SymGAME2_lose_weight">GAME2_lose_weight</a>     .eq     $7712
                   <a name="SymGAME2_txtpos_to_addr">GAME2_txtpos_to_addr</a>  .eq     $7721
                   <a name="Symstate_npc1">state_npc1</a>            .eq     $b200
                   <a name="Symstate_npc">state_npc</a>             .eq     $b280                   ; per npc bitfield; 7=gained a level from this NPC; 0..6=last spoken daynum or 0..4=time of day (NPC $E0..$EF)
                   <a name="SymitemStateCol">itemStateCol</a>          .eq     $b400  {addr/256}       ; 256 column tile positions, one per item
                   <a name="SymitemState">itemState</a>             .eq     $b500  {addr/256}       ; 7=mappos high bit, 6=in world, 5=in inv, 4..0=map row
                   <a name="Syminv_token">inv_token</a>             .eq     $b56c  {addr/75}
                   <a name="SymKBD">KBD</a>                   .eq     $c000                   ;R last key pressed + 128
                   <a name="SymKBDSTRB">KBDSTRB</a>               .eq     $c010                   ;RW keyboard strobe
                   <a name="SymSPKR">SPKR</a>                  .eq     $c030                   ;RW toggle speaker
                   <a name="SymTXTCLR">TXTCLR</a>                .eq     $c050                   ;RW display graphics
                   <a name="SymMIXCLR">MIXCLR</a>                .eq     $c052                   ;RW display full screen
                   <a name="SymTXTPAGE2">TXTPAGE2</a>              .eq     $c055                   ;RW display page 2 (or read/write aux mem)
                   <a name="SymHIRES">HIRES</a>                 .eq     $c057                   ;RW display hi-res graphics

                                         .org    $9600
                   ; External vectors
9600: 4c 06 96     <a name="SymSCRN_demo_handler">SCRN_demo_handler</a>     jmp     <a href="#Symdemo_handler">demo_handler</a>

9603: 4c e0 96     <a name="SymSCRN_show_demo_text">SCRN_show_demo_text</a>   jmp     <a href="#Symshow_demo_text">show_demo_text</a>          ;show demo text in A

                   ; Called when DEMOFLG is 1. This calls back into the main input handler, to
                   ; check if you pressed a key to exit the demo. There is a demo data stream
                   ; parser afterward that reads a byte from ($C2) and executes some action, like a
                   ; delay, melody, or movement.
9606: a9 00        <a name="Symdemo_handler">demo_handler</a>          lda     #$00
9608: 85 c4                              sta     <a href="#SymDEMOFLG">DEMOFLG</a>                 ;turn off demo mode temporarily
960a: a5 b0                              lda     <a href="#SymYMOVFLG">YMOVFLG</a>                 ;save $af/$b0
960c: 48                                 pha
960d: a5 af                              lda     <a href="#SymXMOVFLG">XMOVFLG</a>
960f: 48                                 pha
9610: 20 09 6b                           jsr     <a href="#SymGAME2_ongoing_input">GAME2_ongoing_input</a>     ;call input handler in normal mode
9613: a8                                 tay                             ;preserve return val
9614: 68                                 pla                             ;restore $af/$b0
9615: 85 af                              sta     <a href="#SymXMOVFLG">XMOVFLG</a>
9617: 68                                 pla
9618: 85 b0                              sta     <a href="#SymYMOVFLG">YMOVFLG</a>
961a: a9 00                              lda     #$00
961c: 85 a2                              sta     <a href="#SymMOVING">MOVING</a>
961e: 85 84                              sta     <a href="#SymVIRTBTN">VIRTBTN</a>
9620: 85 85                              sta     <a href="#SymXDIR">XDIR</a>
9622: 85 86                              sta     <a href="#SymYDIR">YDIR</a>
9624: a9 01                              lda     #$01
9626: 85 c4                              sta     <a href="#SymDEMOFLG">DEMOFLG</a>
9628: 98                                 tya                             ;return val from $6b09
9629: f0 09                              beq     <a href="#SymL9634">L9634</a>
962b: a9 00                              lda     #$00
962d: 85 87                              sta     <a href="#SymTICKING">TICKING</a>
962f: a9 ff                              lda     #$ff
9631: 85 c6                              sta     $c6
9633: 60                                 rts

9634: c6 c0        <a name="SymL9634">L9634</a>                 dec     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;time for next action when 0
9636: f0 03                              beq     <a href="#Symread_demo_byte">read_demo_byte</a>          ;if time for next action
9638: a5 c1                              lda     <a href="#SymDEMOLAST">DEMOLAST</a>                ;last movement byte still active
963a: 60                                 rts

                   <span style="background-color: #72be72">NOTE: Below may implement a demo command parser</span>
963b: a0 00        <a name="Symread_demo_byte">read_demo_byte</a>        ldy     #$00
963d: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y
963f: 30 03                              bmi     <a href="#Symdemo_command">demo_command</a>            ;negative value, command
9641: 4c d6 96                           jmp     <a href="#Symdemo_movement">demo_movement</a>           ;positive, movement

9644: c9 ff        <a name="Symdemo_command">demo_command</a>          cmp     #$ff                    ;$ff = end of demo :(
9646: d0 07                              bne     <a href="#Symdemo_c0">demo_c0</a>
9648: a9 00                              lda     #$00                    ;clear demo flag
964a: 85 c4                              sta     <a href="#SymDEMOFLG">DEMOFLG</a>
964c: a9 ff                              lda     #$ff                    ;return to BIT tree
964e: 60                                 rts

964f: c9 c0        <a name="Symdemo_c0">demo_c0</a>               cmp     #$c0                    ;$c0 xx == play melody
9651: d0 0e                              bne     <a href="#Symdemo_c1">demo_c1</a>
9653: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
9656: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y             ;next byte is melody #
9658: 20 00 b6                           jsr     <a href="#SymSCRN_play_melody">SCRN_play_melody</a>
965b: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
965e: 4c 3b 96                           jmp     <a href="#Symread_demo_byte">read_demo_byte</a>

9661: c9 c1        <a name="Symdemo_c1">demo_c1</a>               cmp     #$c1                    ;$c1 == delay
9663: d0 0e                              bne     <a href="#Symdemo_c2">demo_c2</a>
9665: a2 fa                              ldx     #$fa
9667: 20 36 60                           jsr     <a href="#SymGAME2_delay2">GAME2_delay2</a>
966a: a9 01                              lda     #$01
966c: 85 c0                              sta     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;next byte in 1 frame
966e: a9 1f                              lda     #$1f
9670: 4c d9 96                           jmp     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>

9673: c9 c2        <a name="Symdemo_c2">demo_c2</a>               cmp     #$c2                    ;$c2 xx == long delay
9675: d0 17                              bne     <a href="#Symdemo_c3">demo_c3</a>
9677: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
967a: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y             ;next byte is length of delay
967c: 85 c0                              sta     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;$c0 is used as a temp here
967e: a2 fa        @loop                 ldx     #$fa
9680: 20 36 60                           jsr     <a href="#SymGAME2_delay2">GAME2_delay2</a>            ;unclear why we need to delay the cpu
9683: c6 c0                              dec     <a href="#SymDEMOWAIT">DEMOWAIT</a>
9685: d0 f7                              bne     @loop
9687: e6 c0                              inc     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;next byte in 1 frame
9689: a9 1f                              lda     #$1f                    ;note bit 4 is set here, for BIT tests
968b: 4c d9 96                           jmp     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>

968e: c9 c3        <a name="Symdemo_c3">demo_c3</a>               cmp     #$c3                    ;$c3 xx == ??
9690: d0 0e                              bne     <a href="#Symdemo_c4">demo_c4</a>
9692: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
9695: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y
9697: 85 c6                              sta     $c6
9699: a9 00                              lda     #$00
969b: 85 87                              sta     <a href="#SymTICKING">TICKING</a>
969d: a9 1f                              lda     #$1f
969f: 60                                 rts

96a0: c9 c4        <a name="Symdemo_c4">demo_c4</a>               cmp     #$c4                    ;$c4 xx == ??
96a2: d0 13                              bne     <a href="#Symdemo_c5">demo_c5</a>
96a4: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
96a7: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y
96a9: 85 c8                              sta     <a href="#SymDEMOTEXT">DEMOTEXT</a>
96ab: a9 00                              lda     #$00
96ad: 85 87                              sta     <a href="#SymTICKING">TICKING</a>
96af: a9 1f                              lda     #$1f                    ;bit 4 set
96b1: c8                                 iny
96b2: 84 c0                              sty     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;$c0=1
96b4: 4c d9 96                           jmp     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>

96b7: c9 c5        <a name="Symdemo_c5">demo_c5</a>               cmp     #$c5                    ;$c5 == ??
96b9: d0 0d                              bne     <a href="#Symdemo_move_and_wait">demo_move_and_wait</a>
96bb: a9 01                              lda     #$01
96bd: 85 08                              sta     <a href="#Symtemp08">temp08</a>
96bf: 85 65                              sta     $65
96c1: 85 c0                              sta     <a href="#SymDEMOWAIT">DEMOWAIT</a>
96c3: a9 1f                              lda     #$1f                    ;bit 4 set
96c5: 4c d9 96                           jmp     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>

                   ; For any other negative value (not C0..C5 or FF), store the next demo byte in
                   ; the delay counter, store the value in $C1, and return the value in A. This
                   ; value will be a movement code. In effect, the movement is executed and and the
                   ; simulation executes for A frames before reading the next byte. The movement is
                   ; latched in $C1 and will be returned from future frames in wait state.
96c8: 85 c1        <a name="Symdemo_move_and_wait">demo_move_and_wait</a>    sta     <a href="#SymDEMOLAST">DEMOLAST</a>
96ca: 20 d9 96                           jsr     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>
96cd: b1 c2                              lda     (<a href="#SymDEMOPTR">DEMOPTR</a>),y
96cf: 85 c0                              sta     <a href="#SymDEMOWAIT">DEMOWAIT</a>
96d1: a5 c1                              lda     <a href="#SymDEMOLAST">DEMOLAST</a>
96d3: 4c d9 96                           jmp     <a href="#Syminc_demo_ptr">inc_demo_ptr</a>

                   ; Positive movement byte in A. A is returned to caller (the input handler BIT
                   ; tests). When the movement byte is positive, there is no following delay byte;
                   ; the command is executed and the next byte is read on the next frame.
96d6: c8           <a name="Symdemo_movement">demo_movement</a>         iny                             ;y always 0
96d7: 84 c0                              sty     <a href="#SymDEMOWAIT">DEMOWAIT</a>                ;next byte in 1 frame
96d9: e6 c2        <a name="Syminc_demo_ptr">inc_demo_ptr</a>          inc     <a href="#SymDEMOPTR">DEMOPTR</a>                 ;next demo byte
96db: d0 02                              bne     @done
96dd: e6 c3                              inc     <a href="#SymDEMOPTR">DEMOPTR</a>+1               ;hi byte
96df: 60           @done                 rts                             ;when jmp'ed to, returns to input handler

                   ; Show demo text A in text area, for A = 1..5. If A=5, just clears text.
96e0: c9 05        <a name="Symshow_demo_text">show_demo_text</a>        cmp     #$05
96e2: d0 04                              bne     @demo_text_1
96e4: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
96e7: 60                                 rts

96e8: c9 01        @demo_text_1          cmp     #$01
96ea: d0 45                              bne     @demo_text_2
96ec: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
96ef: 0c                                 .dd1    $0c
96f0: d7 c9 ce c4+                       .str    ↑“WINDHAM CLASSICS”
9700: ff                                 .dd1    $ff
9701: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9704: 33                                 .dd1    $33
9705: c3 cf d0 d9+                       .str    ↑“COPYRIGHT (C) 1984”
9717: ff                                 .dd1    $ff
9718: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
971b: 5b                                 .dd1    $5b
971c: c1 cc cc a0+                       .str    ↑“ALL RIGHTS RESERVED”
972f: ff                                 .dd1    $ff
9730: 60                                 rts

9731: c9 02        @demo_text_2          cmp     #$02
9733: f0 03                              beq     @text2
9735: 4c da 97                           jmp     @demo_text_3

9738: 20 0c 60     @text2                jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
973b: 01                                 .dd1    $01                     ;maybe begin string or formatting byte
973c: c3 c8 cf cf+                       .str    ↑“CHOOSE TO BE ERDLING OR KINDAR, MALE    OR FEMALE, CHILD OR A”
                                          +      “DULT.  SET FORTH   TO SOLVE THE RIDDLE OF THE PROPHESY     AND”
                                          +      “ SAVE GREEN-SKY FROM DESTRUCTION.”
97d8: ff                                 .dd1    $ff
97d9: 60                                 rts

97da: c9 03        @demo_text_3          cmp     #$03
97dc: f0 03                              beq     @text3
97de: 4c 80 98                           jmp     @demo_text_4

97e1: 20 0c 60     @text3                jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
97e4: 01                                 .dd1    $01
97e5: d3 c5 c5 cb+                       .str    ↑“SEEK EVERYWHERE, FROM THE THIN FRONDS   OF THE ROOF-TREES TO ”
                                          +      “THE DARK TUNNELS   THAT LIE BELOW THE ROOT.  ESCAPE THE    LUR”
                                          +      “KING EVIL OF NEKOM AND SALITE.”
987e: ff                                 .dd1    $ff
987f: 60                                 rts

9880: 20 0c 60     @demo_text_4          jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9883: 01                                 .dd1    $01
9884: d4 cf a0 c4+                       .str    ↑“TO DO THIS YOU MUST GROW STRONG         IN BODY AND SPIRIT.  ”
                                          +      “PEACE AND JOY TO   YOU QUESTER.  MAY YOU FIND THE HIDDEN   ”
98fc: ff                                 .dd1    $ff
98fd: 4c a2 9b                           jmp     <a href="#Symsecret_and_save_greensky">secret_and_save_greensky</a> ;jumps right over this next data area

                   <span style="background-color: #cbcb00">NOTE: Unknown data. Does not seem to be referenced.</span>
9900: c0 01 9f 04+                       .junk   674

                   <a name="Symsecret_and_save_greensky">secret_and_save_greensky</a>
9ba2: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9ba5: 79                                 .dd1    $79
9ba6: d3 c5 c3 d2+                       .str    ↑“SECRET AND SAVE GREEN-SKY.”
9bc0: ff                                 .dd1    $ff
9bc1: 60                                 rts

9bc2: af                                 .dd1    $af                     ;junk

                   ; The BIT operands below refer to code, not data. Given that, and since this
                   ; resembles a simpler version of the input handling code in GAME2, this could be
                   ; vestigial code.
9bc3: a9 00                              lda     #$00
9bc5: 85 85                              sta     <a href="#SymXDIR">XDIR</a>
9bc7: 85 86                              sta     <a href="#SymYDIR">YDIR</a>
9bc9: 85 a2                              sta     <a href="#SymMOVING">MOVING</a>
9bcb: 85 84                              sta     <a href="#SymVIRTBTN">VIRTBTN</a>
9bcd: a5 c4                              lda     <a href="#SymDEMOFLG">DEMOFLG</a>
9bcf: f0 32                              beq     <a href="#SymSCRN_grunspreke">SCRN_grunspreke</a>
9bd1: 20 00 96                           jsr     <a href="#SymSCRN_demo_handler">SCRN_demo_handler</a>
9bd4: 2c f1 76                           bit     $76f1
9bd7: d0 04                              bne     <a href="#SymL9BDD">L9BDD</a>
9bd9: e6 85                              inc     <a href="#SymXDIR">XDIR</a>
9bdb: e6 a2                              inc     <a href="#SymMOVING">MOVING</a>
9bdd: 2c f0 76     <a name="SymL9BDD">L9BDD</a>                 bit     $76f0
9be0: d0 04                              bne     <a href="#SymL9BE6">L9BE6</a>
9be2: c6 85                              dec     <a href="#SymXDIR">XDIR</a>
9be4: e6 a2                              inc     <a href="#SymMOVING">MOVING</a>
9be6: 2c ef 76     <a name="SymL9BE6">L9BE6</a>                 bit     $76ef
9be9: d0 04                              bne     <a href="#SymL9BEF">L9BEF</a>
9beb: e6 86                              inc     <a href="#SymYDIR">YDIR</a>
9bed: e6 a2                              inc     <a href="#SymMOVING">MOVING</a>
9bef: 2c ee 76     <a name="SymL9BEF">L9BEF</a>                 bit     $76ee
9bf2: d0 04                              bne     <a href="#SymL9BF8">L9BF8</a>
9bf4: c6 86                              dec     <a href="#SymYDIR">YDIR</a>
9bf6: e6 a2                              inc     <a href="#SymMOVING">MOVING</a>
9bf8: 2c f2 76     <a name="SymL9BF8">L9BF8</a>                 bit     $76f2
9bfb: d0 03                              bne     <a href="#SymSCRN_heal">SCRN_heal</a>
9bfd: a9 01                              lda     #$01
9bff: 60                                 rts

                   ; External vector time
9c00: 4c f5 a4     <a name="SymSCRN_heal">SCRN_heal</a>             jmp     <a href="#Symheal">heal</a>

9c03: 4c 44 a5     <a name="SymSCRN_grunspreke">SCRN_grunspreke</a>       jmp     <a href="#Symgrunspreke">grunspreke</a>

9c06: 4c e4 a5     <a name="SymSCRN_kiniport">SCRN_kiniport</a>         jmp     <a href="#Symkiniport">kiniport</a>

9c09: 4c 75 a1     <a name="SymSCRN_use">SCRN_use</a>              jmp     <a href="#Symuse">use</a>

9c0c: 4c 61 9c     <a name="SymSCRN_speak">SCRN_speak</a>            jmp     <a href="#Symspeak">speak</a>

9c0f: 4c 5b 9d     <a name="SymSCRN_pense">SCRN_pense</a>            jmp     <a href="#Sympense">pense</a>

9c12: 4c 63 9e     <a name="SymSCRN_buy">SCRN_buy</a>              jmp     <a href="#Symbuy">buy</a>

9c15: 4c fe 9e     <a name="SymSCRN_sell">SCRN_sell</a>             jmp     <a href="#Symsell">sell</a>

9c18: 4c 6c a0     <a name="SymSCRN_offer">SCRN_offer</a>            jmp     <a href="#Symoffer">offer</a>

9c1b: 4c f3 a7     <a name="SymSCRN_drawtile_store">SCRN_drawtile_store</a>   jmp     <a href="#Symdrawtile_and_store">drawtile_and_store</a>      ;draw tile in A and store to text screen

9c1e: 4c 46 9d     <a name="SymSCRN_triumph_melody">SCRN_triumph_melody</a>   jmp     <a href="#Symplay_random_triumph_melody">play_random_triumph_melody</a>

                   ********************************************************************************
                   * Print NPC emotion/message (message number in A) at position X.               *
                   * The message number is 1-based.                                               *
                   * Message 0 is invalid and caller should display "NO RESPONSE".                *
                   ********************************************************************************
                   tempMsgNum            .var    $08    {addr/1}         ;message number
                   tempStrPtr            .var    $09    {addr/2}         ;ptr to start of cur msg
                   tempStrIdx            .var    $7a    {addr/1}         ;index into string

9c21: 86 64        <a name="Symprint_npc_message">print_npc_message</a>     stx     <a href="#SymHTAB">HTAB</a>                    ;X is the horiz text pos
9c23: 85 08                              sta     tempMsgNum              ;$08 holds A on entry
9c25: a9 00                              lda     #$00
9c27: 85 7a                              sta     tempStrIdx
9c29: a9 00                              lda     #&lt;<a href="#SymGAME1_messages">GAME1_messages</a>
9c2b: 85 09                              sta     tempStrPtr
9c2d: a9 0a                              lda     #&gt;<a href="#SymGAME1_messages">GAME1_messages</a>
9c2f: 85 0a                              sta     tempStrPtr+1
9c31: a0 00        @start_msg            ldy     #$00
9c33: c6 08                              dec     tempMsgNum
9c35: f0 17                              beq     @print                  ;reached desired message; print
9c37: b1 09        @nextchar             lda     (tempStrPtr),y
9c39: c9 ff                              cmp     #$ff
9c3b: f0 03                              beq     @end_msg
9c3d: c8                                 iny
9c3e: d0 f7                              bne     @nextchar
9c40: c8           @end_msg              iny
9c41: 98                                 tya                             ;y=len
9c42: 18                                 clc                             ;advance 16-bit msg ptr by last msg len
9c43: 65 09                              adc     tempStrPtr
9c45: 90 02                              bcc     @nocarry
9c47: e6 0a                              inc     tempStrPtr+1
9c49: 85 09        @nocarry              sta     tempStrPtr
9c4b: 4c 31 9c                           jmp     @start_msg

                   ; Prints the desired message found above.
9c4e: a4 7a        @print                ldy     tempStrIdx
9c50: b1 09                              lda     (tempStrPtr),y
9c52: c9 ff                              cmp     #$ff                    ;read bytes until $FF terminator
9c54: f0 0a                              beq     @rts
9c56: 20 0f 60                           jsr     <a href="#SymGAME2_printchar">GAME2_printchar</a>
9c59: e6 64                              inc     <a href="#SymHTAB">HTAB</a>
9c5b: e6 7a                              inc     tempStrIdx
9c5d: 4c 4e 9c                           jmp     @print

9c60: 60           @rts                  rts

                   • Clear variables

9c61: 20 06 60     <a name="Symspeak">speak</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
9c64: ad e1 02                           lda     <a href="#SymRWTSBUF_npc">RWTSBUF_npc</a>
9c67: d0 18                              bne     @npc_present
9c69: 20 0c 60     @speak_with_whom      jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9c6c: 01                                 .dd1    $01
9c6d: d3 d0 c5 c1+                       .str    ↑“SPEAK WITH WHOM?”
9c7d: ff                                 .dd1    $ff
9c7e: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9c81: 20 14 a0     @npc_present          jsr     <a href="#Symcheck_npc_in_range">check_npc_in_range</a>
9c84: 90 e3                              bcc     @speak_with_whom
9c86: 20 65 a0                           jsr     <a href="#Symcompare_alignment">compare_alignment</a>?
9c89: 90 39                              bcc     @speak_ok
9c8b: ad f2 02                           lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>         ;0 if NPC offers an item
9c8e: d0 34                              bne     @speak_ok
9c90: 20 00 01                           jsr     <a href="#SymSTACK_npc_offer">STACK_npc_offer</a>         ;NPC offers you an item (if available)
9c93: ae f1 02                           ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>
9c96: bd 80 b2                           lda     <a href="#Symstate_npc">state_npc</a>,x
9c99: 29 7f                              and     #$7f                    ;bits 0..6 last day we spoke to this NPC
9c9b: c5 22                              cmp     <a href="#SymdayNum">dayNum</a>                  ;was item already taken today?
9c9d: d0 25                              bne     @speak_ok               ;no, speak normally to NPC
9c9f: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>           ;yes, npc says slow down
9ca2: 01                                 .dd1    $01
9ca3: c3 cf cd c5+                       .str    ↑“COME BACK TOMORROW, MY FRIEND”
9cc0: ff                                 .dd1    $ff
9cc1: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9cc4: 20 65 a0     @speak_ok             jsr     <a href="#Symcompare_alignment">compare_alignment</a>?
9cc7: 90 0a                              bcc     @variant2
9cc9: ad e9 02                           lda     <a href="#SymRWTSBUF_npc_speak_bot1">RWTSBUF_npc_speak_bot1</a>  ;spoken message variant #1 part 2
9ccc: 48                                 pha
9ccd: ad e8 02                           lda     <a href="#SymRWTSBUF_npc_speak_top1">RWTSBUF_npc_speak_top1</a>  ;spoken message variant #1 part 1
9cd0: 4c da 9c                           jmp     @chkmsg

9cd3: ad ed 02     @variant2             lda     <a href="#SymRWTSBUF_npc_speak_bot2">RWTSBUF_npc_speak_bot2</a>  ;spoken message variant #2 part 2
9cd6: 48                                 pha
9cd7: ad ec 02                           lda     <a href="#SymRWTSBUF_npc_speak_top2">RWTSBUF_npc_speak_top2</a>  ;spoken message variant #2 part 1
9cda: d0 04        @chkmsg               bne     @do_msg
9cdc: 68                                 pla
9cdd: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>           ;null message, no response

9ce0: a2 01        @do_msg               ldx     #$01                    ;screen pos 1 -- top msg
9ce2: 20 21 9c                           jsr     <a href="#Symprint_npc_message">print_npc_message</a>
9ce5: 68                                 pla
9ce6: f0 05                              beq     @update_state           ;bottom message may be missing, ignore if so
9ce8: a2 29                              ldx     #$29                    ;print bottom message, if any
9cea: 20 21 9c                           jsr     <a href="#Symprint_npc_message">print_npc_message</a>
9ced: ae f1 02     @update_state         ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>
9cf0: bd 80 b2                           lda     <a href="#Symstate_npc">state_npc</a>,x
9cf3: 29 80                              and     #$80                    ;update bits 0..6 with current day number
9cf5: 05 22                              ora     <a href="#SymdayNum">dayNum</a>                  ;indicating we spoke to NPC today
9cf7: 9d 80 b2                           sta     <a href="#Symstate_npc">state_npc</a>,x             ;used e.g. when checking if item was taken today
9cfa: 20 65 a0                           jsr     <a href="#Symcompare_alignment">compare_alignment</a>?
9cfd: 90 1e                              bcc     <a href="#SymL9D1D">L9D1D</a>
9cff: ad f2 02                           lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9d02: f0 15                              beq     @spoketo
                   <span style="background-color: #cbcb00">NOTE: Special handling for NPC type speaking.</span>
9d04: c9 40                              cmp     #$40
9d06: f0 11                              beq     @spoketo
9d08: 29 f0                              and     #$f0
9d0a: c9 20                              cmp     #$20
9d0c: f0 0b                              beq     @spoketo
9d0e: ad f2 02                           lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9d11: c9 d0                              cmp     #$d0
9d13: d0 08                              bne     <a href="#SymL9D1D">L9D1D</a>
9d15: a9 01                              lda     #$01
9d17: 85 38                              sta     <a href="#SymfallaKeyOffered">fallaKeyOffered</a>
9d19: a9 01        @spoketo              lda     #$01                    ;some npcs do this
9d1b: 85 37                              sta     <a href="#SymspokeTo">spokeTo</a>
9d1d: ad f2 02     <a name="SymL9D1D">L9D1D</a>                 lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9d20: c9 40                              cmp     #$40                    ;NPC type $40 gains us a level the 1st time we speak
9d22: d0 1f                              bne     @return
9d24: ae f1 02                           ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>
9d27: bd 80 b2                           lda     <a href="#Symstate_npc">state_npc</a>,x
9d2a: 2c bf 1d                           bit     <a href="#SymGAME1_BITTAB7">GAME1_BITTAB7</a>           ;did we gain a level by speaking to npc earlier?
9d2d: d0 14                              bne     @return                 ;yes, return
9d2f: 09 80                              ora     #$80                    ;no, level up
9d31: 9d 80 b2                           sta     <a href="#Symstate_npc">state_npc</a>,x             ;record this NPC was spoken to
9d34: 18                                 clc
9d35: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>             ;gain 5 spirit
9d37: 69 05                              adc     #$05
9d39: 85 27                              sta     <a href="#SymlimitSpirit">limitSpirit</a>
9d3b: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>             ;fill spirit
9d3d: 20 46 9d                           jsr     <a href="#Symplay_random_triumph_melody">play_random_triumph_melody</a> ;celebrate
9d40: 20 00 1b                           jsr     <a href="#SymGAME1_power_gained">GAME1_power_gained</a>      ;gain a level
9d43: 4c 06 77     @return               jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   <a name="Symplay_random_triumph_melody">play_random_triumph_melody</a>
9d46: a2 c0                              ldx     #$c0
9d48: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
9d4b: 20 21 60                           jsr     <a href="#SymGAME2_read_0900">GAME2_read_0900</a>         ;pseudo-random choice of melody, probably
9d4e: 29 07                              and     #$07
9d50: 18                                 clc
9d51: 69 02                              adc     #$02
9d53: 20 00 b6                           jsr     <a href="#SymSCRN_play_melody">SCRN_play_melody</a>
9d56: a5 83        @loop                 lda     <a href="#SymwaitMelody">waitMelody</a>              ;again, probably vestigial interrupt checking
9d58: d0 fc                              bne     @loop
9d5a: 60                                 rts

9d5b: 20 06 60     <a name="Sympense">pense</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
9d5e: ad e1 02                           lda     <a href="#SymRWTSBUF_npc">RWTSBUF_npc</a>             ;npc present?
9d61: d0 13                              bne     @npc_present
9d63: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9d66: 01                                 .dd1    $01
9d67: d0 c5 ce d3+                       .str    ↑“PENSE WHOM?”
9d72: ff                                 .dd1    $ff
9d73: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9d76: a5 27        @npc_present          lda     <a href="#SymlimitSpirit">limitSpirit</a>
9d78: c9 05                              cmp     #$05                    ;pense emotion requires 5 spirit limit
9d7a: b0 21                              bcs     @spirit_limit_ok
9d7c: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9d7f: 01                                 .dd1    $01
9d80: d9 cf d5 a0+                       .str    ↑“YOU LACK THE SPIRIT SKILL” ;duplicate code at $A7D2
9d99: ff                                 .dd1    $ff
9d9a: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9d9d: a5 23        @spirit_limit_ok      lda     <a href="#SymlevelSpirit">levelSpirit</a>
9d9f: d0 23                              bne     @spirit_level_ok        ;pense emotion consumes 1 spirit point
9da1: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9da4: 01                                 .dd1    $01
9da5: d9 cf d5 a0+                       .str    ↑“YOU NEED MORE SPIRIT ENERGY” ;duplicate code at $0103/$0160 (but this one works)
9dc0: ff                                 .dd1    $ff
9dc1: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9dc4: 20 0c 60     @spirit_level_ok      jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9dc7: 01                                 .dd1    $01
9dc8: c5 cd cf d4+                       .str    ↑“EMOTION:”
9dd0: ff                                 .dd1    $ff
9dd1: 20 65 a0                           jsr     <a href="#Symcompare_alignment">compare_alignment</a>?
9dd4: 90 08                              bcc     @emotion2
9dd6: ad ea 02                           lda     <a href="#SymRWTSBUF_npc_pense_emot1">RWTSBUF_npc_pense_emot1</a> ;npc emotion #1 (1-based)
9dd9: d0 0b                              bne     @pense_message
9ddb: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>

9dde: ad ee 02     @emotion2             lda     <a href="#SymRWTSBUF_npc_pense_emot2">RWTSBUF_npc_pense_emot2</a> ;npc emotion #2 (1-based)
9de1: d0 03                              bne     @pense_message
9de3: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>

9de6: a2 0a        @pense_message        ldx     #$0a                    ;location on screen
9de8: 20 21 9c                           jsr     <a href="#Symprint_npc_message">print_npc_message</a>
9deb: c6 23                              dec     <a href="#SymlevelSpirit">levelSpirit</a>             ;use one point of spirit
9ded: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
9def: c9 0a                              cmp     #$0a                    ;pense msg needs 10 limit (but no more cast points)
9df1: b0 03                              bcs     @spirit_limit_ok
9df3: 4c 06 77     @pense_message_failed jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>      ;can't pense messages, display nothing and continue

9df6: a5 23        @spirit_limit_ok      lda     <a href="#SymlevelSpirit">levelSpirit</a>
9df8: f0 f9                              beq     @pense_message_failed
9dfa: 20 14 a0                           jsr     <a href="#Symcheck_npc_in_range">check_npc_in_range</a>      ;msg must be in range, emotion works from anywhere
9dfd: 90 f4                              bcc     @pense_message_failed
9dff: ad f2 02                           lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9e02: c9 01                              cmp     #$01
9e04: d0 0b                              bne     @pense_message_ok
9e06: ae f1 02                           ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>          ;this is an animal
9e09: bd 80 b2                           lda     <a href="#Symstate_npc">state_npc</a>,x             ;check if we've pensed it already
9e0c: 2c bf 1d                           bit     <a href="#SymGAME1_BITTAB7">GAME1_BITTAB7</a>
9e0f: d0 e2                              bne     @pense_message_failed   ;we have, no response
9e11: 20 0c 60     @pense_message_ok     jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>           ;message worked, may still get NO RESPONSE
9e14: 51                                 .dd1    $51
9e15: cd c5 d3 d3+                       .str    ↑“MESSAGE:”
9e1d: ff                                 .dd1    $ff
9e1e: 20 65 a0                           jsr     <a href="#Symcompare_alignment">compare_alignment</a>?      ;will return 1 of 2 messages, or no response
9e21: 90 08                              bcc     @variant2
9e23: ad eb 02                           lda     <a href="#SymRWTSBUF_npc_pense_mesg1">RWTSBUF_npc_pense_mesg1</a> ;npc message #1 (1-based)
9e26: d0 0b                              bne     @print_pense_message
9e28: 4c 52 a0                           jmp     <a href="#Symno_response_2">no_response_2</a>

9e2b: ad ef 02     @variant2             lda     <a href="#SymRWTSBUF_npc_pense_mesg2">RWTSBUF_npc_pense_mesg2</a> ;npc message #2 (1-based)
9e2e: d0 03                              bne     @print_pense_message
9e30: 4c 52 a0                           jmp     <a href="#Symno_response_2">no_response_2</a>

9e33: a2 79        @print_pense_message  ldx     #$79                    ;location on screen
9e35: 20 21 9c                           jsr     <a href="#Symprint_npc_message">print_npc_message</a>
9e38: c6 23                              dec     <a href="#SymlevelSpirit">levelSpirit</a>
9e3a: ad f2 02                           lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9e3d: c9 01                              cmp     #$01
9e3f: d0 1f                              bne     @ret
                   ; Pensing a new animal causes a gain of 1 spirit limit; record when this happens
                   ; and if it happens 5 times, refill spirit and gain a level. (Recording running
                   ; gain is a cheap, but probably unnecessarily optimized, way to check the new
                   ; limitSpirit is divisible by 5.)
9e41: ae f1 02                           ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>          ;our pense caused us to gain 1 spirit limit!
9e44: bd 80 b2                           lda     <a href="#Symstate_npc">state_npc</a>,x
9e47: 09 80                              ora     #$80
9e49: 9d 80 b2                           sta     <a href="#Symstate_npc">state_npc</a>,x
9e4c: e6 27                              inc     <a href="#SymlimitSpirit">limitSpirit</a>
9e4e: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
9e50: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>
9e52: 20 46 9d                           jsr     <a href="#Symplay_random_triumph_melody">play_random_triumph_melody</a>
9e55: e6 3f                              inc     <a href="#SymgainSpirit">gainSpirit</a>              ;running counter of spirit increases, modulo 5
9e57: a5 3f                              lda     <a href="#SymgainSpirit">gainSpirit</a>              ;(major events that add 5 don't affect this counter)
9e59: c9 05                              cmp     #$05                    ;have we gained 1 point 5 times?
9e5b: d0 03                              bne     @ret
9e5d: 20 00 1b                           jsr     <a href="#SymGAME1_power_gained">GAME1_power_gained</a>      ;yes, gain a level (also resets gainSpirit to 0)
9e60: 4c 06 77     @ret                  jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9e63: 20 06 60     <a name="Symbuy">buy</a>                   jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
9e66: 20 e9 9f                           jsr     <a href="#Symcheck_merchant_here">check_merchant_here</a>
9e69: 20 14 a0                           jsr     <a href="#Symcheck_npc_in_range">check_npc_in_range</a>
9e6c: b0 03                              bcs     <a href="#SymL9E71">L9E71</a>
9e6e: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>

9e71: a2 4a        <a name="SymL9E71">L9E71</a>                 ldx     #$4a
9e73: bd 6c b5     @loop                 lda     <a href="#Syminv_token">inv_token</a>,x
9e76: 2c bd 1d                           bit     <a href="#SymGAME1_BITTAB5">GAME1_BITTAB5</a>
9e79: d0 1f                              bne     @check_weight
9e7b: ca                                 dex
9e7c: 10 f5                              bpl     @loop
9e7e: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9e81: 01                                 .dd1    $01
9e82: d9 cf d5 a0+                       .str    ↑“YOU NEED MORE TOKENS”
9e96: ff                                 .dd1    $ff
9e97: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9e9a: a5 70        @check_weight         lda     <a href="#SymWEIGHT">WEIGHT</a>
9e9c: 18                                 clc
9e9d: 69 04                              adc     #$04                    ;I guess everything weighs 4?
9e9f: c5 2c                              cmp     <a href="#SymmaxWeight">maxWeight</a>
9ea1: 90 27                              bcc     @underweight
9ea3: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9ea6: 01                                 .dd1    $01
9ea7: d3 cf d2 d2+                       .str    ↑“SORRY, YOU'RE CARRYING TOO MUCH”
9ec6: ff                                 .dd1    $ff
9ec7: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9eca: a9 00        @underweight          lda     #$00
9ecc: 9d 6c b5                           sta     <a href="#Syminv_token">inv_token</a>,x
9ecf: a0 08                              ldy     #$08
9ed1: 20 12 77                           jsr     <a href="#SymGAME2_lose_weight">GAME2_lose_weight</a>       ;but why discard weight here
9ed4: a9 01                              lda     #$01
9ed6: 85 37                              sta     <a href="#SymspokeTo">spokeTo</a>                 ;maybe the take flag?
9ed8: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9edb: 01                                 .dd1    $01
9edc: d4 c1 cb c5+                       .str    ↑“TAKE WHICHEVER ONE PLEASES YOU”
9efa: ff                                 .dd1    $ff
9efb: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   tempItemSlot          .var    $77    {addr/1}
                   tempItemNum           .var    $78    {addr/1}

9efe: 20 06 60     <a name="Symsell">sell</a>                  jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
9f01: 20 e9 9f                           jsr     <a href="#Symcheck_merchant_here">check_merchant_here</a>
9f04: 20 14 a0                           jsr     <a href="#Symcheck_npc_in_range">check_npc_in_range</a>
9f07: b0 03                              bcs     @what_to_sell
9f09: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>

9f0c: 20 0c 60     @what_to_sell         jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9f0f: 01                                 .dd1    $01
9f10: d7 c8 c1 d4+                       .str    ↑“WHAT WILL YOU SELL?”
9f23: ff                                 .dd1    $ff
9f24: a9 ff                              lda     #$ff
9f26: 85 77                              sta     tempItemSlot
9f28: 85 78                              sta     tempItemNum
9f2a: 85 39                              sta     <a href="#SymsuppressSound0">suppressSound0</a>
9f2c: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
9f2f: e6 77        @next_item            inc     tempItemSlot            ;loop over slots $00..$FE
9f31: a6 77                              ldx     tempItemSlot
9f33: e0 ff                              cpx     #$ff                    ;slot $FF is "NOTHING"
9f35: d0 1a                              bne     @some_item
9f37: 86 78                              stx     tempItemNum
9f39: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9f3c: 16                                 .dd1    $16
9f3d: ce cf d4 c8+                       .str    ↑“NOTHING         ”
9f4d: ff                                 .dd1    $ff
9f4e: 4c 6f 9f                           jmp     @beep

9f51: bd 00 b5     @some_item            lda     <a href="#SymitemState">itemState</a>,x
9f54: 2c bd 1d                           bit     <a href="#SymGAME1_BITTAB5">GAME1_BITTAB5</a>           ;in inventory?
9f57: f0 d6                              beq     @next_item              ;no, skip
9f59: 8a                                 txa
9f5a: 20 03 77                           jsr     <a href="#SymGAME2_slot_to_item">GAME2_slot_to_item</a>
9f5d: c4 78                              cpy     tempItemNum
9f5f: f0 ce                              beq     @next_item
9f61: b9 da 9f                           lda     <a href="#Symsellable_items">sellable_items</a>,y        ;is item saleable?
9f64: f0 c9                              beq     @next_item              ;no, skip it
9f66: 84 78                              sty     tempItemNum
9f68: a9 16                              lda     #$16
9f6a: 85 64                              sta     <a href="#SymHTAB">HTAB</a>
9f6c: 20 0f 77                           jsr     <a href="#SymGAME2_print_item_desc">GAME2_print_item_desc</a>
9f6f: 20 06 b6     @beep                 jsr     <a href="#SymSCRN_play_sound_0">SCRN_play_sound_0</a>       ;beep
9f72: 20 2a 6b     @loop                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
9f75: d0 07                              bne     @sold                   ;button pressed
9f77: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
9f79: 10 f7                              bpl     @loop                   ;didn't press up, loop
9f7b: 4c 2f 9f                           jmp     @next_item

9f7e: 20 06 60     @sold                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
9f81: a6 77                              ldx     tempItemSlot
9f83: e0 ff                              cpx     #$ff                    ;NOTHING?
9f85: d0 01                              bne     <a href="#SymL9F88">L9F88</a>                   ;selected something, branch
9f87: 60                                 rts                             ;nothing, just return

                   NOTE: Unsure what #$4A is for relating to item state
9f88: a2 4a        <a name="SymL9F88">L9F88</a>                 ldx     #$4a                    ;?
9f8a: bd 6c b5     @loop                 lda     <a href="#Syminv_token">inv_token</a>,x
9f8d: f0 1d                              beq     @sell_it
9f8f: ca                                 dex
9f90: 10 f8                              bpl     @loop
9f92: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9f95: 01                                 .dd1    $01
9f96: c9 a7 cd a0+                       .str    ↑“I'M NOT INTERESTED”
9fa8: ff                                 .dd1    $ff
9fa9: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

9fac: a9 60        @sell_it              lda     #$60                    ;?
9fae: 9d 6c b5                           sta     <a href="#Syminv_token">inv_token</a>,x
9fb1: a6 77                              ldx     tempItemSlot
9fb3: a9 00                              lda     #$00
9fb5: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x             ;clear item; permanently burned
9fb8: 8a                                 txa
9fb9: 20 03 77                           jsr     <a href="#SymGAME2_slot_to_item">GAME2_slot_to_item</a>
9fbc: 20 12 77                           jsr     <a href="#SymGAME2_lose_weight">GAME2_lose_weight</a>
9fbf: e6 70                              inc     <a href="#SymWEIGHT">WEIGHT</a>                  ;obtained token weighs 1
9fc1: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9fc4: 01                                 .dd1    $01
9fc5: c8 c5 d2 c5+                       .str    ↑“HERE'S YOUR TOKEN”
9fd6: ff                                 .dd1    $ff
9fd7: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   ; Sellable items. One entry per item, $01 if we can sell it.
                   ; Below we annotate the non-sellable items.
9fda: 00           <a name="Symsellable_items">sellable_items</a>        .dd1    $00                     ;item 0 ignored
9fdb: 00                                 .dd1    $00                     ;spirit lamp
9fdc: 01                                 .dd1    $01
9fdd: 00                                 .dd1    $00                     ;wand
9fde: 01                                 .dd1    $01
9fdf: 01                                 .dd1    $01
9fe0: 01                                 .dd1    $01
9fe1: 01                                 .dd1    $01
9fe2: 00                                 .dd1    $00                     ;token
9fe3: 01                                 .dd1    $01
9fe4: 01                                 .dd1    $01
9fe5: 01                                 .dd1    $01
9fe6: 00                                 .dd1    $00                     ;key
9fe7: 00                                 .dd1    $00                     ;key
9fe8: 00                                 .dd1    $00                     ;elixer

                   • Clear variables

9fe9: ad f2 02     <a name="Symcheck_merchant_here">check_merchant_here</a>   lda     <a href="#SymRWTSBUF_npctype">RWTSBUF_npctype</a>
9fec: c9 80                              cmp     #$80
9fee: f0 23                              beq     @rts
9ff0: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
9ff3: 01                                 .dd1    $01
9ff4: d4 c8 c5 d2+                       .str    ↑“THERE IS NO MERCHANT HERE”
a00d: ff                                 .dd1    $ff
a00e: 68                                 pla
a00f: 68                                 pla
a010: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a013: 60           @rts                  rts

                   ; Check if NPC is in range for normal speech (1-2 tiles), as well as facing you,
                   ; and set the carry flag if so.
a014: a5 19        <a name="Symcheck_npc_in_range">check_npc_in_range</a>    lda     <a href="#SymplayerX">playerX</a>
a016: 18                                 clc
a017: 65 95                              adc     <a href="#SymFACING">FACING</a>
a019: c5 6c                              cmp     <a href="#SymnpcX">npcX</a>                    ;is NPC standing 1 tile away
a01b: f0 07                              beq     @x_ok
a01d: 18                                 clc
a01e: 65 95                              adc     <a href="#SymFACING">FACING</a>
a020: c5 6c                              cmp     <a href="#SymnpcX">npcX</a>                    ;or 2 away
a022: d0 19                              bne     @clc
a024: a4 1a        @x_ok                 ldy     <a href="#SymplayerY">playerY</a>
a026: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a028: f0 0b                              beq     <a href="#SymLA035">LA035</a>
a02a: c8                                 iny
a02b: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a02d: f0 06                              beq     <a href="#SymLA035">LA035</a>
a02f: 88                                 dey
a030: 88                                 dey
a031: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a033: d0 08                              bne     @clc
a035: a5 95        <a name="SymLA035">LA035</a>                 lda     <a href="#SymFACING">FACING</a>
a037: c5 6f                              cmp     <a href="#SymnpcFacing">npcFacing</a>
a039: f0 02                              beq     @clc                    ;facing same dir, reject
a03b: 38                                 sec                             ;we're good
a03c: 60                                 rts

a03d: 18           @clc                  clc
a03e: 60                                 rts

a03f: 20 0c 60     <a name="Symno_response_1">no_response_1</a>         jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a042: 0f                                 .dd1    $0f
a043: ce cf a0 d2+                       .str    ↑“NO RESPONSE”
a04e: ff                                 .dd1    $ff
a04f: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a052: 20 0c 60     <a name="Symno_response_2">no_response_2</a>         jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a055: 5a                                 .dd1    $5a
a056: ce cf a0 d2+                       .str    ↑“NO RESPONSE”
a061: ff                                 .dd1    $ff
a062: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   ********************************************************************************
                   * $45 and $46 come from $02E2 ($45 is the lower 4 bits, and $46 is the upper 4 *
                   * bits &gt;&gt; 4). This data always exists at $02E2, so these are effectively       *
                   * precomputed temps for this map screen.                                       *
                   *                                                                              *
                   * $28 comes from the character stats, loaded at init time and never modified.  *
                   *                                                                              *
                   * Empirically (based on map data), $46 will always be $00 (meaning $28) or $01 *
                   * (meaning $29). $45 will be $00..$04 (never $05).                             *
                   * Based on player stats, $28/$29 are always $00,$02,$03, or $05 (never $04 or  *
                   * $01).                                                                        *
                   *                                                                              *
                   * The caller does a BCC (&lt;) on the result so it is natural that $28/$29 do not *
                   * exactly match $45.                                                           *
                   *                                                                              *
                   * Callers deal with NO RESPONSE etc. so it's possible this is alignment-       *
                   * related, although it is more fine-grained than the binary races.             *
                   ********************************************************************************
a065: a6 45        <a name="Symcompare_alignment">compare_alignment?</a>    ldx     <a href="#SymMON_A5H">MON_A5H</a>
a067: b5 28                              lda     <a href="#SymMON_BASL">MON_BASL</a>,x
a069: c5 46                              cmp     $46
a06b: 60                                 rts

a06c: 20 06 60     <a name="Symoffer">offer</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a06f: ad e1 02                           lda     <a href="#SymRWTSBUF_npc">RWTSBUF_npc</a>
a072: d0 16                              bne     <a href="#Symoffer_what">offer_what</a>
a074: 20 0c 60     @noone                jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a077: 01                                 .dd1    $01
a078: cf c6 c6 c5+                       .str    ↑“OFFER TO WHOM?”
a086: ff                                 .dd1    $ff
a087: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a08a: 20 14 a0     <a name="Symoffer_what">offer_what</a>            jsr     <a href="#Symcheck_npc_in_range">check_npc_in_range</a>
a08d: 90 e5                              bcc     @noone
a08f: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a092: 01                                 .dd1    $01
a093: cf c6 c6 c5+                       .str    ↑“OFFER WHAT?”
a09e: ff                                 .dd1    $ff
a09f: a9 ff                              lda     #$ff
a0a1: 85 77                              sta     <a href="#SymselItemSlot">selItemSlot</a>
a0a3: 85 39                              sta     <a href="#SymsuppressSound0">suppressSound0</a>
a0a5: 85 78                              sta     <a href="#SymselItemNum">selItemNum</a>
a0a7: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a0aa: e6 77        <a name="SymLA0AA">LA0AA</a>                 inc     <a href="#SymselItemSlot">selItemSlot</a>
a0ac: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a0ae: e0 ff                              cpx     #$ff
a0b0: d0 1a                              bne     <a href="#SymLA0CC">LA0CC</a>
a0b2: 86 78                              stx     <a href="#SymselItemNum">selItemNum</a>
a0b4: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a0b7: 0e                                 .dd1    $0e
a0b8: ce cf d4 c8+                       .str    ↑“NOTHING         ”
a0c8: ff                                 .dd1    $ff
a0c9: 4c e5 a0                           jmp     <a href="#SymLA0E5">LA0E5</a>

a0cc: bd 00 b5     <a name="SymLA0CC">LA0CC</a>                 lda     <a href="#SymitemState">itemState</a>,x
a0cf: 2c bd 1d                           bit     <a href="#SymGAME1_BITTAB5">GAME1_BITTAB5</a>
a0d2: f0 d6                              beq     <a href="#SymLA0AA">LA0AA</a>
a0d4: 8a                                 txa
a0d5: 20 03 77                           jsr     <a href="#SymGAME2_slot_to_item">GAME2_slot_to_item</a>
a0d8: c4 78                              cpy     <a href="#SymselItemNum">selItemNum</a>
a0da: f0 ce                              beq     <a href="#SymLA0AA">LA0AA</a>
a0dc: 84 78                              sty     <a href="#SymselItemNum">selItemNum</a>
a0de: a9 0e                              lda     #$0e
a0e0: 85 64                              sta     <a href="#SymHTAB">HTAB</a>
a0e2: 20 0f 77                           jsr     <a href="#SymGAME2_print_item_desc">GAME2_print_item_desc</a>
a0e5: 20 06 b6     <a name="SymLA0E5">LA0E5</a>                 jsr     <a href="#SymSCRN_play_sound_0">SCRN_play_sound_0</a>
a0e8: 20 2a 6b     <a name="SymLA0E8">LA0E8</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
a0eb: d0 07                              bne     <a href="#SymLA0F4">LA0F4</a>
a0ed: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
a0ef: 10 f7                              bpl     <a href="#SymLA0E8">LA0E8</a>
a0f1: 4c aa a0                           jmp     <a href="#SymLA0AA">LA0AA</a>

a0f4: 20 06 60     <a name="SymLA0F4">LA0F4</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a0f7: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a0f9: e0 ff                              cpx     #$ff
a0fb: d0 03                              bne     <a href="#SymLA100">LA100</a>
a0fd: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a100: a4 78        <a name="SymLA100">LA100</a>                 ldy     <a href="#SymselItemNum">selItemNum</a>
a102: ad f1 02                           lda     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>
a105: c9 49                              cmp     #$49
a107: f0 22                              beq     <a href="#Symoffer_raamo">offer_raamo</a>             ;getting warmer
a109: c9 34                              cmp     #$34
a10b: f0 2e                              beq     <a href="#SymLA13B">LA13B</a>
a10d: c9 35                              cmp     #$35
a10f: f0 3d                              beq     <a href="#SymLA14E">LA14E</a>
a111: 4c 3f a0                           jmp     <a href="#Symno_response_1">no_response_1</a>

a114: 20 0c 60     @will_not_help        jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a117: 01                                 .dd1    $01
a118: d4 c8 c1 d4+                       .str    ↑“THAT WON'T HELP”
a127: ff                                 .dd1    $ff
a128: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   ; Spoiler ahead: Offer Raamo a shuba or a rope to win.
a12b: c0 07        <a name="Symoffer_raamo">offer_raamo</a>           cpy     #<a href="#Symitem_shuba">item_shuba</a>
a12d: f0 04                              beq     @win
a12f: c0 0b                              cpy     #<a href="#Symitem_rope">item_rope</a>
a131: d0 e1                              bne     @will_not_help
a133: 20 24 6b     @win                  jsr     <a href="#SymGAME2_win_game">GAME2_win_game</a>          ;that was easy
a136: 68                                 pla
a137: 68                                 pla
a138: 4c 40 a8                           jmp     <a href="#SymSCRN_warm_start">SCRN_warm_start</a>

a13b: c0 0a        <a name="SymLA13B">LA13B</a>                 cpy     #$0a
a13d: d0 d5                              bne     @will_not_help
a13f: e6 41                              inc     <a href="#SymMON_A3H">MON_A3H</a>
a141: a5 41                              lda     <a href="#SymMON_A3H">MON_A3H</a>
a143: c9 02                              cmp     #$02
a145: d0 0b                              bne     <a href="#SymLA152">LA152</a>
a147: a9 80                              lda     #$80
a149: 8d 34 b2                           sta     $b234
a14c: d0 04                              bne     <a href="#SymLA152">LA152</a>

a14e: c0 08        <a name="SymLA14E">LA14E</a>                 cpy     #$08
a150: d0 c2                              bne     @will_not_help
a152: a9 01        <a name="SymLA152">LA152</a>                 lda     #$01
a154: 85 42                              sta     <a href="#SymMON_A4L">MON_A4L</a>
a156: a9 00                              lda     #$00
a158: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a15a: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x
a15d: 20 12 77                           jsr     <a href="#SymGAME2_lose_weight">GAME2_lose_weight</a>
a160: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a163: 01                                 .dd1    $01
a164: d9 cf d5 a0+                       .str    ↑“YOU MAY ENTER”
a171: ff                                 .dd1    $ff
a172: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a175: 20 06 60     <a name="Symuse">use</a>                   jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a178: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a17b: 01                                 .dd1    $01
a17c: d5 d3 c5 a0+                       .str    ↑“USE WHAT?”
a185: ff                                 .dd1    $ff
a186: a9 ff                              lda     #$ff
a188: 85 77                              sta     <a href="#SymselItemSlot">selItemSlot</a>
a18a: 85 78                              sta     <a href="#SymselItemNum">selItemNum</a>
a18c: 85 39                              sta     <a href="#SymsuppressSound0">suppressSound0</a>
a18e: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a191: e6 77        <a name="SymLA191">LA191</a>                 inc     <a href="#SymselItemSlot">selItemSlot</a>
a193: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a195: e0 ff                              cpx     #$ff
a197: d0 1a                              bne     <a href="#SymLA1B3">LA1B3</a>
a199: 86 78                              stx     <a href="#SymselItemNum">selItemNum</a>
a19b: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a19e: 0c                                 .dd1    $0c
a19f: ce cf d4 c8+                       .str    ↑“NOTHING         ”
a1af: ff                                 .dd1    $ff
a1b0: 4c d0 a1                           jmp     <a href="#SymLA1D0">LA1D0</a>

a1b3: bd 00 b5     <a name="SymLA1B3">LA1B3</a>                 lda     <a href="#SymitemState">itemState</a>,x
a1b6: 29 20                              and     #$20
a1b8: f0 d7                              beq     <a href="#SymLA191">LA191</a>
a1ba: 8a                                 txa
a1bb: 20 03 77                           jsr     <a href="#SymGAME2_slot_to_item">GAME2_slot_to_item</a>
a1be: b9 df a1                           lda     <a href="#SymLA1DF">LA1DF</a>,y
a1c1: f0 ce                              beq     <a href="#SymLA191">LA191</a>
a1c3: c4 78                              cpy     <a href="#SymselItemNum">selItemNum</a>
a1c5: f0 ca                              beq     <a href="#SymLA191">LA191</a>
a1c7: 84 78                              sty     <a href="#SymselItemNum">selItemNum</a>
a1c9: a9 0c                              lda     #$0c
a1cb: 85 64                              sta     <a href="#SymHTAB">HTAB</a>
a1cd: 20 0f 77                           jsr     <a href="#SymGAME2_print_item_desc">GAME2_print_item_desc</a>
a1d0: 20 06 b6     <a name="SymLA1D0">LA1D0</a>                 jsr     <a href="#SymSCRN_play_sound_0">SCRN_play_sound_0</a>
a1d3: 20 2a 6b     <a name="SymLA1D3">LA1D3</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
a1d6: d0 16                              bne     <a href="#Symuse_item">use_item</a>
a1d8: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
a1da: 10 f7                              bpl     <a href="#SymLA1D3">LA1D3</a>
a1dc: 4c 91 a1                           jmp     <a href="#SymLA191">LA191</a>

a1df: 00           <a name="SymLA1DF">LA1DF</a>                 .dd1    $00
a1e0: 00                                 .dd1    $00
a1e1: 01                                 .dd1    $01
a1e2: 01                                 .dd1    $01
a1e3: 00 00 00 00+                       .fill   5,$00
a1e8: 01                                 .dd1    $01
a1e9: 00                                 .dd1    $00
a1ea: 01                                 .dd1    $01
a1eb: 01                                 .dd1    $01
a1ec: 01                                 .dd1    $01
a1ed: 00                                 .dd1    $00

a1ee: 20 06 60     <a name="Symuse_item">use_item</a>              jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a1f1: a5 77                              lda     <a href="#SymselItemSlot">selItemSlot</a>
a1f3: c9 ff                              cmp     #$ff                    ;nothing
a1f5: d0 01                              bne     <a href="#Symuse_lamp">use_lamp</a>
a1f7: 60                                 rts

a1f8: a5 78        <a name="Symuse_lamp">use_lamp</a>              lda     <a href="#SymselItemNum">selItemNum</a>
a1fa: c9 02                              cmp     #<a href="#Symitem_honeyLamp">item_honeyLamp</a>
a1fc: d0 4d                              bne     <a href="#Symuse_wand">use_wand</a>
a1fe: a5 3a                              lda     <a href="#SymlitLamp">litLamp</a>
a200: f0 20                              beq     <a href="#Symlight_lamp">light_lamp</a>
a202: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a205: 01                                 .dd1    $01
a206: d9 cf d5 d2+                       .str    ↑“YOUR LAMP IS ALREADY LIT”
a21e: ff                                 .dd1    $ff
a21f: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a222: a5 77        <a name="Symlight_lamp">light_lamp</a>            lda     <a href="#SymselItemSlot">selItemSlot</a>
a224: 85 3a                              sta     <a href="#SymlitLamp">litLamp</a>
a226: 20 21 60                           jsr     <a href="#SymGAME2_read_0900">GAME2_read_0900</a>         ;pseudo-random bytes
a229: 29 03                              and     #$03
a22b: 18                                 clc
a22c: 69 0a                              adc     #$0a                    ;10..13
a22e: 85 44                              sta     <a href="#SymlampFuel">lampFuel</a>
a230: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a233: 01                                 .dd1    $01
a234: d9 cf d5 d2+                       .str    ↑“YOUR LAMP IS LIT”
a244: ff                                 .dd1    $ff
a245: 20 4b 60                           jsr     $604b
a248: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a24b: c9 03        <a name="Symuse_wand">use_wand</a>              cmp     #<a href="#Symitem_wand">item_wand</a>
a24d: d0 4d                              bne     @check_beak
a24f: 20 81 a4                           jsr     <a href="#SymLA481">LA481</a>
a252: b0 0b                              bcs     @wand_cuts_swiftly
a254: a9 1c                              lda     #$1c
a256: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a258: 20 44 a4                           jsr     <a href="#SymLA444">LA444</a>
a25b: a5 76                              lda     <a href="#Symtemp76">temp76</a>
a25d: f0 1d                              beq     @wand_is_useless
a25f: 20 0c 60     @wand_cuts_swiftly    jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a262: 01                                 .dd1    $01
a263: d4 c8 c5 a0+                       .str    ↑“THE WAND CUTS SWIFTLY”
a278: ff                                 .dd1    $ff
a279: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a27c: 20 0c 60     @wand_is_useless      jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a27f: 01                                 .dd1    $01
a280: d4 c8 c5 a0+                       .str    ↑“THE WAND IS USELESS HERE”
a298: ff                                 .dd1    $ff
a299: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a29c: c9 09        @check_beak           cmp     #<a href="#Symitem_beak">item_beak</a>
a29e: f0 03                              beq     <a href="#Symuse_trencher_beak">use_trencher_beak</a>
a2a0: 4c 30 a3                           jmp     @check_rope

a2a3: a9 1c        <a name="Symuse_trencher_beak">use_trencher_beak</a>     lda     #$1c
a2a5: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a2a7: 20 44 a4                           jsr     <a href="#SymLA444">LA444</a>
a2aa: a5 76                              lda     <a href="#Symtemp76">temp76</a>
a2ac: f0 23                              beq     @trencher_beak_useless
a2ae: 20 21 60                           jsr     <a href="#SymGAME2_read_0900">GAME2_read_0900</a>
a2b1: c9 f0                              cmp     #$f0
a2b3: b0 45                              bcs     @trencher_beak_breaks
a2b5: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a2b8: 01                                 .dd1    $01
a2b9: d4 c8 c5 a0+                       .str    ↑“THE BEAK CUTS SLOWLY”
a2cd: ff                                 .dd1    $ff
a2ce: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   @trencher_beak_useless
a2d1: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a2d4: 01                                 .dd1    $01
a2d5: d4 c8 c5 a0+                       .str    ↑“THE TRENCHER BEAK IS USELESS HERE”
a2f6: ff                                 .dd1    $ff
a2f7: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a2fa: a9 00        @trencher_beak_breaks lda     #$00
a2fc: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a2fe: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x
a301: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a304: 01                                 .dd1    $01
a305: d4 c8 c5 a0+                       .str    ↑“THE TRENCHER BEAK BREAKS”
a31d: ff                                 .dd1    $ff
a31e: a2 07                              ldx     #$07
a320: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
a323: a2 ff                              ldx     #$ff
a325: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
a328: a0 09                              ldy     #$09
a32a: 20 12 77                           jsr     <a href="#SymGAME2_lose_weight">GAME2_lose_weight</a>
a32d: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a330: c9 0b        @check_rope           cmp     #<a href="#Symitem_rope">item_rope</a>
a332: f0 03                              beq     <a href="#Symuse_rope">use_rope</a>
a334: 4c c0 a3                           jmp     <a href="#Symuse_temple_key">use_temple_key</a>

a337: a9 00        <a name="Symuse_rope">use_rope</a>              lda     #$00
a339: 85 75                              sta     <a href="#Symtemp75">temp75</a>
a33b: a9 01                              lda     #$01
a33d: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a33f: a5 19                              lda     <a href="#SymplayerX">playerX</a>
a341: 20 84 a3                           jsr     <a href="#SymLA384">LA384</a>
a344: a5 76                              lda     <a href="#Symtemp76">temp76</a>
a346: d0 20                              bne     <a href="#SymLA368">LA368</a>
a348: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a34b: 01                                 .dd1    $01
a34c: d4 c8 c5 a0+                       .str    ↑“THE ROPE IS USELESS HERE”
a364: ff                                 .dd1    $ff
a365: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a368: a9 e0        <a name="SymLA368">LA368</a>                 lda     #$e0
a36a: 85 75                              sta     <a href="#Symtemp75">temp75</a>
a36c: a9 00                              lda     #$00
a36e: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a370: a5 19                              lda     <a href="#SymplayerX">playerX</a>
a372: 20 87 a3                           jsr     <a href="#SymLA387">LA387</a>
a375: a9 00                              lda     #$00
a377: a6 77                              ldx     <a href="#SymselItemSlot">selItemSlot</a>
a379: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x
a37c: a0 0b                              ldy     #$0b
a37e: 20 12 77                           jsr     <a href="#SymGAME2_lose_weight">GAME2_lose_weight</a>
a381: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a384: 18           <a name="SymLA384">LA384</a>                 clc
a385: 65 95                              adc     <a href="#SymFACING">FACING</a>
a387: 18           <a name="SymLA387">LA387</a>                 clc
a388: 65 95                              adc     <a href="#SymFACING">FACING</a>
a38a: 85 05                              sta     $05
a38c: a6 1a                              ldx     <a href="#SymplayerY">playerY</a>
a38e: e8                                 inx
a38f: 86 06                              stx     $06
a391: a9 00                              lda     #$00
a393: 85 76                              sta     <a href="#Symtemp76">temp76</a>
a395: a6 05        <a name="SymLA395">LA395</a>                 ldx     $05
a397: 30 22                              bmi     <a href="#SymLA3BB">LA3BB</a>
a399: e0 28                              cpx     #$28
a39b: b0 1e                              bcs     <a href="#SymLA3BB">LA3BB</a>
a39d: a4 06                              ldy     $06
a39f: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a3a2: f0 04                              beq     <a href="#SymLA3A8">LA3A8</a>
a3a4: a5 08                              lda     <a href="#Symtemp08">temp08</a>
a3a6: d0 12                              bne     <a href="#SymLA3BA">LA3BA</a>
a3a8: a5 75        <a name="SymLA3A8">LA3A8</a>                 lda     <a href="#Symtemp75">temp75</a>
a3aa: 20 f3 a7                           jsr     <a href="#Symdrawtile_and_store">drawtile_and_store</a>
a3ad: a5 05                              lda     $05
a3af: 18                                 clc
a3b0: 65 95                              adc     <a href="#SymFACING">FACING</a>
a3b2: 85 05                              sta     $05
a3b4: e6 76                              inc     <a href="#Symtemp76">temp76</a>
a3b6: e6 08                              inc     <a href="#Symtemp08">temp08</a>
a3b8: d0 db                              bne     <a href="#SymLA395">LA395</a>
a3ba: 60           <a name="SymLA3BA">LA3BA</a>                 rts

a3bb: a9 00        <a name="SymLA3BB">LA3BB</a>                 lda     #$00
a3bd: 85 76                              sta     <a href="#Symtemp76">temp76</a>
a3bf: 60                                 rts

a3c0: c9 0c        <a name="Symuse_temple_key">use_temple_key</a>        cmp     #<a href="#Symitem_templeKey">item_templeKey</a>
a3c2: d0 3a                              bne     <a href="#Symuse_falla_key">use_falla_key</a>?
a3c4: a5 1b                              lda     <a href="#SymMAPPOS">MAPPOS</a>
a3c6: c9 4a                              cmp     #$4a
a3c8: d0 04                              bne     <a href="#SymLA3CE">LA3CE</a>
a3ca: a5 1c                              lda     <a href="#SymMAPHALF">MAPHALF</a>
a3cc: f0 11                              beq     <a href="#Symkey_is_useless_here">key_is_useless_here</a>
a3ce: a9 08        <a name="SymLA3CE">LA3CE</a>                 lda     #$08
a3d0: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a3d2: 20 44 a4                           jsr     <a href="#SymLA444">LA444</a>
a3d5: a5 76                              lda     <a href="#Symtemp76">temp76</a>
a3d7: f0 06                              beq     <a href="#Symkey_is_useless_here">key_is_useless_here</a>
a3d9: 20 46 9d                           jsr     <a href="#Symplay_random_triumph_melody">play_random_triumph_melody</a>
a3dc: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a3df: 20 0c 60     <a name="Symkey_is_useless_here">key_is_useless_here</a>   jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a3e2: 01                                 .dd1    $01
a3e3: d4 c8 c5 a0+                       .str    ↑“THE KEY IS USELESS HERE”
a3fa: ff                                 .dd1    $ff
a3fb: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a3fe: a5 1b        <a name="Symuse_falla_key">use_falla_key?</a>        lda     <a href="#SymMAPPOS">MAPPOS</a>
a400: c9 4a                              cmp     #$4a
a402: d0 db                              bne     <a href="#Symkey_is_useless_here">key_is_useless_here</a>
a404: a5 1c                              lda     <a href="#SymMAPHALF">MAPHALF</a>
a406: d0 d7                              bne     <a href="#Symkey_is_useless_here">key_is_useless_here</a>
a408: a9 08                              lda     #$08
a40a: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a40c: 20 44 a4                           jsr     <a href="#SymLA444">LA444</a>
a40f: a5 76                              lda     <a href="#Symtemp76">temp76</a>
a411: f0 cc                              beq     <a href="#Symkey_is_useless_here">key_is_useless_here</a>
a413: a5 95                              lda     <a href="#SymFACING">FACING</a>
a415: 30 2a                              bmi     <a href="#SymLA441">LA441</a>
a417: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a41a: 01                                 .dd1    $01
a41b: c5 ce d4 c5+                       .str    ↑“ENTER THE CHAMBER OF THE FORGOTTEN”
a43d: ff                                 .dd1    $ff
a43e: 20 46 9d                           jsr     <a href="#Symplay_random_triumph_melody">play_random_triumph_melody</a>
a441: 4c 06 77     <a name="SymLA441">LA441</a>                 jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a444: a5 19        <a name="SymLA444">LA444</a>                 lda     <a href="#SymplayerX">playerX</a>
a446: 18                                 clc
a447: 65 95                              adc     <a href="#SymFACING">FACING</a>
a449: 85 05                              sta     $05
a44b: a5 1a                              lda     <a href="#SymplayerY">playerY</a>
a44d: 85 06                              sta     $06
a44f: a9 00                              lda     #$00
a451: 85 76                              sta     <a href="#Symtemp76">temp76</a>
a453: 20 5e a4                           jsr     <a href="#SymLA45E">LA45E</a>
a456: a5 19                              lda     <a href="#SymplayerX">playerX</a>
a458: 85 05                              sta     $05
a45a: a5 1a                              lda     <a href="#SymplayerY">playerY</a>
a45c: 85 06                              sta     $06
a45e: a9 05        <a name="SymLA45E">LA45E</a>                 lda     #$05
a460: 85 75                              sta     <a href="#Symtemp75">temp75</a>
a462: a6 05        <a name="SymLA462">LA462</a>                 ldx     $05
a464: a4 06                              ldy     $06
a466: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a469: c5 08                              cmp     <a href="#Symtemp08">temp08</a>
a46b: d0 07                              bne     <a href="#SymLA474">LA474</a>
a46d: a9 00                              lda     #$00
a46f: 20 f3 a7                           jsr     <a href="#Symdrawtile_and_store">drawtile_and_store</a>
a472: e6 76                              inc     <a href="#Symtemp76">temp76</a>
a474: c6 06        <a name="SymLA474">LA474</a>                 dec     $06
a476: c6 75                              dec     <a href="#Symtemp75">temp75</a>
a478: d0 e8                              bne     <a href="#SymLA462">LA462</a>
a47a: 20 15 6b                           jsr     $6b15
a47d: 20 03 6b                           jsr     <a href="#SymGAME2_draw_player">GAME2_draw_player</a>
a480: 60                                 rts

a481: ae f1 02     <a name="SymLA481">LA481</a>                 ldx     <a href="#SymRWTSBUF_npcnum">RWTSBUF_npcnum</a>
a484: f0 6d                              beq     <a href="#SymLA4F3">LA4F3</a>
a486: bd 00 b2                           lda     <a href="#Symstate_npc1">state_npc1</a>,x
a489: 2c bf 1d                           bit     <a href="#SymGAME1_BITTAB7">GAME1_BITTAB7</a>
a48c: d0 65                              bne     <a href="#SymLA4F3">LA4F3</a>
a48e: a5 19                              lda     <a href="#SymplayerX">playerX</a>
a490: c5 6c                              cmp     <a href="#SymnpcX">npcX</a>
a492: f0 0e                              beq     <a href="#SymLA4A2">LA4A2</a>
a494: 18                                 clc
a495: 65 95                              adc     <a href="#SymFACING">FACING</a>
a497: c5 6c                              cmp     <a href="#SymnpcX">npcX</a>
a499: f0 07                              beq     <a href="#SymLA4A2">LA4A2</a>
a49b: 18                                 clc
a49c: 65 95                              adc     <a href="#SymFACING">FACING</a>
a49e: c5 6c                              cmp     <a href="#SymnpcX">npcX</a>
a4a0: d0 51                              bne     <a href="#SymLA4F3">LA4F3</a>
a4a2: a4 1a        <a name="SymLA4A2">LA4A2</a>                 ldy     <a href="#SymplayerY">playerY</a>
a4a4: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a4a6: f0 0b                              beq     <a href="#SymLA4B3">LA4B3</a>
a4a8: 88                                 dey
a4a9: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a4ab: f0 06                              beq     <a href="#SymLA4B3">LA4B3</a>
a4ad: c8                                 iny
a4ae: c8                                 iny
a4af: c4 6d                              cpy     <a href="#SymnpcY">npcY</a>
a4b1: d0 40                              bne     <a href="#SymLA4F3">LA4F3</a>
a4b3: bd 00 b2     <a name="SymLA4B3">LA4B3</a>                 lda     <a href="#Symstate_npc1">state_npc1</a>,x
a4b6: 09 80                              ora     #$80
a4b8: 9d 00 b2                           sta     <a href="#Symstate_npc1">state_npc1</a>,x
a4bb: a9 03                              lda     #$03
a4bd: 20 1b 6b                           jsr     $6b1b
a4c0: 20 03 6b                           jsr     <a href="#SymGAME2_draw_player">GAME2_draw_player</a>
a4c3: a2 01                              ldx     #$01
a4c5: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
a4c8: a0 01                              ldy     #$01
a4ca: a5 6a                              lda     $6a
a4cc: c9 0a                              cmp     #$0a
a4ce: f0 04                              beq     <a href="#SymLA4D4">LA4D4</a>
a4d0: c9 06                              cmp     #$06
a4d2: b0 02                              bcs     <a href="#SymLA4D6">LA4D6</a>
a4d4: a0 05        <a name="SymLA4D4">LA4D4</a>                 ldy     #$05
a4d6: 84 11        <a name="SymLA4D6">LA4D6</a>                 sty     <a href="#Symtemp11_textlo">temp11_textlo</a>           ;temp reused for a bit
a4d8: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
a4da: 38                                 sec
a4db: e5 11                              sbc     <a href="#Symtemp11_textlo">temp11_textlo</a>
a4dd: b0 02                              bcs     <a href="#SymLA4E1">LA4E1</a>
a4df: a9 00                              lda     #$00
a4e1: 85 27        <a name="SymLA4E1">LA4E1</a>                 sta     <a href="#SymlimitSpirit">limitSpirit</a>
a4e3: a9 00                              lda     #$00
a4e5: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>
a4e7: a9 00                              lda     #$00
a4e9: 85 6b                              sta     <a href="#Symzp6b_npcHere">zp6b_npcHere</a>
a4eb: a9 32                              lda     #$32                    ;spirited away?
a4ed: 85 6c                              sta     <a href="#SymnpcX">npcX</a>
a4ef: 85 6d                              sta     <a href="#SymnpcY">npcY</a>
a4f1: 38                                 sec
a4f2: 60                                 rts

a4f3: 18           <a name="SymLA4F3">LA4F3</a>                 clc
a4f4: 60                                 rts

a4f5: 20 06 60     <a name="Symheal">heal</a>                  jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a4f8: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
a4fa: c9 0f                              cmp     #15
a4fc: b0 03                              bcs     @check_spirit_level
a4fe: 4c d2 a7                           jmp     <a href="#Symyou_lack_spirit_skill">you_lack_spirit_skill</a>

a501: a5 23        @check_spirit_level   lda     <a href="#SymlevelSpirit">levelSpirit</a>
a503: 38                                 sec
a504: e9 05                              sbc     #$05
a506: b0 03                              bcs     @heal_ok
a508: 4c 03 01                           jmp     <a href="#SymSTACK_need_energy">STACK_need_energy</a>       ;jumps into illegal instruction

a50b: 85 23        @heal_ok              sta     <a href="#SymlevelSpirit">levelSpirit</a>
a50d: 18                                 clc
a50e: a5 24                              lda     <a href="#SymlevelFood">levelFood</a>
a510: 69 02                              adc     #$02
a512: c5 2a                              cmp     <a href="#SymlimitFood">limitFood</a>
a514: 90 04                              bcc     <a href="#SymLA51A">LA51A</a>
a516: a6 2a                              ldx     <a href="#SymlimitFood">limitFood</a>
a518: ca                                 dex
a519: 8a                                 txa
a51a: 85 24        <a name="SymLA51A">LA51A</a>                 sta     <a href="#SymlevelFood">levelFood</a>
a51c: 18                                 clc
a51d: a5 25                              lda     <a href="#SymlevelRest">levelRest</a>
a51f: 69 02                              adc     #$02
a521: c5 2b                              cmp     <a href="#SymlimitRest">limitRest</a>
a523: 90 04                              bcc     @you_heal_yourself
a525: a6 2b                              ldx     <a href="#SymlimitRest">limitRest</a>
a527: ca                                 dex
a528: 8a                                 txa
a529: 85 25        @you_heal_yourself    sta     <a href="#SymlevelRest">levelRest</a>
a52b: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a52e: 01                                 .dd1    $01
a52f: d9 cf d5 a0+                       .str    ↑“YOU HEAL YOURSELF”
a540: ff                                 .dd1    $ff
a541: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a544: 20 06 60     <a name="Symgrunspreke">grunspreke</a>            jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a547: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
a549: c9 14                              cmp     #20
a54b: b0 03                              bcs     <a href="#SymLA550">LA550</a>
a54d: 4c d2 a7                           jmp     <a href="#Symyou_lack_spirit_skill">you_lack_spirit_skill</a>

a550: a5 23        <a name="SymLA550">LA550</a>                 lda     <a href="#SymlevelSpirit">levelSpirit</a>
a552: 38                                 sec
a553: e9 02                              sbc     #$02
a555: b0 03                              bcs     <a href="#SymLA55A">LA55A</a>
a557: 4c 03 01                           jmp     <a href="#SymSTACK_need_energy">STACK_need_energy</a>

a55a: a5 60        <a name="SymLA55A">LA55A</a>                 lda     $60
a55c: f0 26                              beq     <a href="#SymLA584">LA584</a>
a55e: 20 0c 60     <a name="SymLA55E">LA55E</a>                 jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a561: 01                                 .dd1    $01
a562: c7 d2 d5 ce+                       .str    ↑“GRUNSPREKING DOESN'T WORK HERE”
a580: ff                                 .dd1    $ff
a581: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a584: 20 0f 6b     <a name="SymLA584">LA584</a>                 jsr     $6b0f
a587: a5 e3                              lda     <a href="#SymtileUnder">tileUnder</a>
a589: c9 df                              cmp     #$df
a58b: f0 08                              beq     <a href="#SymLA595">LA595</a>
a58d: c9 02                              cmp     #$02
a58f: 90 cd                              bcc     <a href="#SymLA55E">LA55E</a>
a591: c9 07                              cmp     #$07
a593: b0 c9                              bcs     <a href="#SymLA55E">LA55E</a>
a595: a5 19        <a name="SymLA595">LA595</a>                 lda     <a href="#SymplayerX">playerX</a>
a597: 18                                 clc
a598: 65 95                              adc     <a href="#SymFACING">FACING</a>
a59a: 85 05                              sta     $05
a59c: 30 c0                              bmi     <a href="#SymLA55E">LA55E</a>
a59e: c9 28                              cmp     #$28
a5a0: b0 bc                              bcs     <a href="#SymLA55E">LA55E</a>
a5a2: aa                                 tax
a5a3: a4 1a                              ldy     <a href="#SymplayerY">playerY</a>
a5a5: c8                                 iny
a5a6: 84 06                              sty     $06
a5a8: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a5ab: c9 df                              cmp     #$df
a5ad: f0 af                              beq     <a href="#SymLA55E">LA55E</a>
a5af: c9 02                              cmp     #$02
a5b1: 90 04                              bcc     <a href="#SymLA5B7">LA5B7</a>
a5b3: c9 07                              cmp     #$07
a5b5: 90 a7                              bcc     <a href="#SymLA55E">LA55E</a>
a5b7: a0 00        <a name="SymLA5B7">LA5B7</a>                 ldy     #$00
a5b9: a9 df                              lda     #$df
a5bb: 20 f3 a7                           jsr     <a href="#Symdrawtile_and_store">drawtile_and_store</a>
a5be: 18                                 clc
a5bf: a9 18                              lda     #$18
a5c1: 65 8a                              adc     <a href="#Symtemp89">temp89</a>+1
a5c3: 85 8a                              sta     <a href="#Symtemp89">temp89</a>+1
a5c5: a9 09                              lda     #$09
a5c7: a5 23                              lda     <a href="#SymlevelSpirit">levelSpirit</a>
a5c9: 38                                 sec
a5ca: e9 02                              sbc     #$02
a5cc: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>
a5ce: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a5d1: 01                                 .dd1    $01
a5d2: d4 c8 c5 a0+                       .str    ↑“THE LIMB GROWS”
a5e0: ff                                 .dd1    $ff
a5e1: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a5e4: 20 06 60     <a name="Symkiniport">kiniport</a>              jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a5e7: a5 27                              lda     <a href="#SymlimitSpirit">limitSpirit</a>
a5e9: c9 19                              cmp     #25
a5eb: b0 03                              bcs     @check_spirit_level
a5ed: 4c d2 a7                           jmp     <a href="#Symyou_lack_spirit_skill">you_lack_spirit_skill</a>

a5f0: a5 23        @check_spirit_level   lda     <a href="#SymlevelSpirit">levelSpirit</a>
a5f2: c9 05                              cmp     #$05
a5f4: b0 03                              bcs     @kiniport_what
a5f6: 4c 03 01                           jmp     <a href="#SymSTACK_need_energy">STACK_need_energy</a>

a5f9: 20 c2 a7     @kiniport_what        jsr     <a href="#SymLA7C2">LA7C2</a>
a5fc: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a5ff: 01                                 .dd1    $01
a600: d7 c8 c1 d4+                       .str    ↑“WHAT DO YOU WANT TO KINIPORT?”
a61d: ff                                 .dd1    $ff
a61e: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a621: 20 8c a7                           jsr     <a href="#SymLA78C">LA78C</a>
a624: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a627: a6 19                              ldx     <a href="#SymplayerX">playerX</a>
a629: e4 31                              cpx     $31
a62b: f0 03                              beq     <a href="#SymLA630">LA630</a>
a62d: 4c b2 a6                           jmp     <a href="#SymLA6B2">LA6B2</a>

a630: a4 1a        <a name="SymLA630">LA630</a>                 ldy     <a href="#SymplayerY">playerY</a>
a632: c4 32                              cpy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a634: f0 0d                              beq     <a href="#Symkiniport_body">kiniport_body</a>
a636: 88                                 dey
a637: c4 32                              cpy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a639: f0 08                              beq     <a href="#Symkiniport_body">kiniport_body</a>
a63b: 88                                 dey
a63c: c4 32                              cpy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a63e: f0 03                              beq     <a href="#Symkiniport_body">kiniport_body</a>
a640: 4c b2 a6                           jmp     <a href="#SymLA6B2">LA6B2</a>

a643: a5 27        <a name="Symkiniport_body">kiniport_body</a>         lda     <a href="#SymlimitSpirit">limitSpirit</a>
a645: c9 1e                              cmp     #30
a647: b0 06                              bcs     @check_spirit_level
a649: 20 ce a7                           jsr     <a href="#SymLA7CE">LA7CE</a>
a64c: 4c d2 a7                           jmp     <a href="#Symyou_lack_spirit_skill">you_lack_spirit_skill</a>

a64f: a5 23        @check_spirit_level   lda     <a href="#SymlevelSpirit">levelSpirit</a>
a651: c9 0a                              cmp     #10
a653: b0 06                              bcs     <a href="#Symkiniport_body_where">kiniport_body_where</a>
a655: 20 ce a7                           jsr     <a href="#SymLA7CE">LA7CE</a>
a658: 4c 03 01                           jmp     <a href="#SymSTACK_need_energy">STACK_need_energy</a>

a65b: 20 0c 60     <a name="Symkiniport_body_where">kiniport_body_where</a>   jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a65e: 01                                 .dd1    $01
a65f: cb c9 ce c9+                       .str    ↑“KINIPORT YOUR BODY WHERE?”
a678: ff                                 .dd1    $ff
a679: 20 0c 77     <a name="SymLA679">LA679</a>                 jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a67c: 20 8c a7                           jsr     <a href="#SymLA78C">LA78C</a>
a67f: a6 31                              ldx     $31
a681: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a683: c8                                 iny
a684: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a687: 20 12 6b                           jsr     $6b12
a68a: a5 f0                              lda     <a href="#SymySolid">ySolid</a>
a68c: f0 eb                              beq     <a href="#SymLA679">LA679</a>
a68e: a6 31                              ldx     $31
a690: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a692: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a695: 20 78 a7                           jsr     <a href="#SymLA778">LA778</a>
a698: b0 df                              bcs     <a href="#SymLA679">LA679</a>
a69a: a5 31                              lda     $31
a69c: 85 19                              sta     <a href="#SymplayerX">playerX</a>
a69e: a5 32                              lda     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a6a0: 85 1a                              sta     <a href="#SymplayerY">playerY</a>
a6a2: 20 0c 6b                           jsr     <a href="#SymGAME2_redraw_player">GAME2_redraw_player</a>
a6a5: 20 ce a7                           jsr     <a href="#SymLA7CE">LA7CE</a>
a6a8: a5 23                              lda     <a href="#SymlevelSpirit">levelSpirit</a>
a6aa: 38                                 sec
a6ab: e9 0a                              sbc     #$0a
a6ad: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>
a6af: 4c 06 60                           jmp     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>

a6b2: a6 31        <a name="SymLA6B2">LA6B2</a>                 ldx     $31
a6b4: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a6b6: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a6b9: c9 e1                              cmp     #$e1
a6bb: b0 22                              bcs     <a href="#SymLA6DF">LA6DF</a>
a6bd: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a6c0: 01                                 .dd1    $01
a6c1: d9 cf d5 a0+                       .str    ↑“YOU CAN'T KINIPORT THAT”
a6d8: ff                                 .dd1    $ff
a6d9: 20 ce a7                           jsr     <a href="#SymLA7CE">LA7CE</a>
a6dc: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

a6df: 2c b8 1d     <a name="SymLA6DF">LA6DF</a>                 bit     <a href="#SymGAME1_BITTAB0">GAME1_BITTAB0</a>
a6e2: d0 02                              bne     <a href="#SymLA6E6">LA6E6</a>
a6e4: c6 31                              dec     $31
a6e6: a5 31        <a name="SymLA6E6">LA6E6</a>                 lda     $31
a6e8: 85 08                              sta     <a href="#Symtemp08">temp08</a>
a6ea: a5 32                              lda     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a6ec: 85 65                              sta     $65
a6ee: 20 15 77                           jsr     $7715
a6f1: 85 33                              sta     <a href="#SymMON_PROMPT">MON_PROMPT</a>
a6f3: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a6f6: 01                                 .dd1    $01
a6f7: cb c9 ce c9+                       .str    ↑“KINIPORT THE OBJECT WHERE?”
a711: ff                                 .dd1    $ff
a712: 20 0c 77     <a name="SymLA712">LA712</a>                 jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a715: 20 8c a7                           jsr     <a href="#SymLA78C">LA78C</a>
a718: a6 31                              ldx     $31
a71a: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a71c: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a71f: 20 74 a7                           jsr     <a href="#SymLA774">LA774</a>
a722: b0 ee                              bcs     <a href="#SymLA712">LA712</a>
a724: a6 31                              ldx     $31
a726: e8                                 inx
a727: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a729: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a72c: 20 74 a7                           jsr     <a href="#SymLA774">LA774</a>
a72f: b0 e1                              bcs     <a href="#SymLA712">LA712</a>
a731: a6 31                              ldx     $31
a733: a4 32                              ldy     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a735: c8                                 iny
a736: 20 1e 6b                           jsr     <a href="#SymGAME2_tile_at_xy">GAME2_tile_at_xy</a>
a739: 20 12 6b                           jsr     $6b12
a73c: a5 f0                              lda     <a href="#SymySolid">ySolid</a>
a73e: f0 d2                              beq     <a href="#SymLA712">LA712</a>
a740: a6 31                              ldx     $31
a742: e0 27                              cpx     #$27
a744: f0 cc                              beq     <a href="#SymLA712">LA712</a>
a746: a6 33                              ldx     <a href="#SymMON_PROMPT">MON_PROMPT</a>
a748: bd 00 b5                           lda     <a href="#SymitemState">itemState</a>,x
a74b: 09 20                              ora     #$20
a74d: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x
a750: 20 24 77                           jsr     $7724
a753: a6 33                              ldx     <a href="#SymMON_PROMPT">MON_PROMPT</a>
a755: a5 31                              lda     $31
a757: 9d 00 b4                           sta     <a href="#SymitemStateCol">itemStateCol</a>,x
a75a: bd 00 b5                           lda     <a href="#SymitemState">itemState</a>,x
a75d: 29 c0                              and     #$c0
a75f: 05 32                              ora     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a761: 9d 00 b5                           sta     <a href="#SymitemState">itemState</a>,x
a764: 20 24 77                           jsr     $7724
a767: 20 ce a7                           jsr     <a href="#SymLA7CE">LA7CE</a>
a76a: a5 23                              lda     <a href="#SymlevelSpirit">levelSpirit</a>
a76c: 38                                 sec
a76d: e9 05                              sbc     #$05
a76f: 85 23                              sta     <a href="#SymlevelSpirit">levelSpirit</a>
a771: 4c 06 60                           jmp     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>

a774: c9 e1        <a name="SymLA774">LA774</a>                 cmp     #$e1
a776: b0 12                              bcs     <a href="#SymLA78A">LA78A</a>
a778: c9 07        <a name="SymLA778">LA778</a>                 cmp     #$07
a77a: f0 0e                              beq     <a href="#SymLA78A">LA78A</a>
a77c: c9 52                              cmp     #$52
a77e: f0 0a                              beq     <a href="#SymLA78A">LA78A</a>
a780: c9 1c                              cmp     #$1c
a782: f0 06                              beq     <a href="#SymLA78A">LA78A</a>
a784: c9 08                              cmp     #$08
a786: f0 02                              beq     <a href="#SymLA78A">LA78A</a>
a788: 18                                 clc
a789: 60                                 rts

a78a: 38           <a name="SymLA78A">LA78A</a>                 sec
a78b: 60                                 rts

a78c: 20 2a 6b     <a name="SymLA78C">LA78C</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
a78f: f0 05                              beq     <a href="#SymLA796">LA796</a>
a791: a2 00                              ldx     #$00
a793: 4c 03 b6                           jmp     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>

a796: a5 a2        <a name="SymLA796">LA796</a>                 lda     <a href="#SymMOVING">MOVING</a>
a798: f0 f2                              beq     <a href="#SymLA78C">LA78C</a>
a79a: 20 1c a8                           jsr     <a href="#SymLA81C">LA81C</a>
a79d: 18                                 clc
a79e: a5 85                              lda     <a href="#SymXDIR">XDIR</a>
a7a0: 65 31                              adc     $31
a7a2: 30 06                              bmi     <a href="#SymLA7AA">LA7AA</a>
a7a4: c9 28                              cmp     #$28
a7a6: b0 02                              bcs     <a href="#SymLA7AA">LA7AA</a>
a7a8: 85 31                              sta     $31
a7aa: 18           <a name="SymLA7AA">LA7AA</a>                 clc
a7ab: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
a7ad: 65 32                              adc     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a7af: 30 06                              bmi     <a href="#SymLA7B7">LA7B7</a>
a7b1: c9 13                              cmp     #$13
a7b3: b0 02                              bcs     <a href="#SymLA7B7">LA7B7</a>
a7b5: 85 32                              sta     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a7b7: 20 02 a8     <a name="SymLA7B7">LA7B7</a>                 jsr     <a href="#SymLA802">LA802</a>
a7ba: a2 32                              ldx     #$32
a7bc: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
a7bf: 4c 8c a7                           jmp     <a href="#SymLA78C">LA78C</a>

a7c2: a5 19        <a name="SymLA7C2">LA7C2</a>                 lda     <a href="#SymplayerX">playerX</a>
a7c4: 85 31                              sta     $31
a7c6: a5 1a                              lda     <a href="#SymplayerY">playerY</a>
a7c8: 85 32                              sta     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a7ca: 20 02 a8                           jsr     <a href="#SymLA802">LA802</a>
a7cd: 60                                 rts

a7ce: 20 1c a8     <a name="SymLA7CE">LA7CE</a>                 jsr     <a href="#SymLA81C">LA81C</a>
a7d1: 60                                 rts

a7d2: 20 0c 60     <a name="Symyou_lack_spirit_skill">you_lack_spirit_skill</a> jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a7d5: 01                                 .dd1    $01
a7d6: d9 cf d5 a0+                       .str    ↑“YOU LACK THE SPIRIT SKILL”
a7ef: ff                                 .dd1    $ff
a7f0: 4c 06 77                           jmp     <a href="#SymGAME2_message_wait">GAME2_message_wait</a>

                   ; Draw tile in A to hires screen at (TXTCOL,TXTROW), and store it to the text
                   ; screen at that same position.
a7f3: 85 49        <a name="Symdrawtile_and_store">drawtile_and_store</a>    sta     <a href="#Symtemp49">temp49</a>                  ;temp save, used only here
a7f5: 20 03 60                           jsr     <a href="#SymGAME2_drawtile">GAME2_drawtile</a>          ;write tile in A to hires
a7f8: 20 21 77                           jsr     <a href="#SymGAME2_txtpos_to_addr">GAME2_txtpos_to_addr</a>    ;get text addr of tile in $11
a7fb: a5 49                              lda     <a href="#Symtemp49">temp49</a>
a7fd: a0 00                              ldy     #$00
a7ff: 91 11                              sta     (<a href="#Symtemp11_textlo">temp11_textlo</a>),y       ;store tile to text page
a801: 60                                 rts

a802: a5 31        <a name="SymLA802">LA802</a>                 lda     $31
a804: 85 05                              sta     $05
a806: a5 32                              lda     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a808: 85 06                              sta     $06
a80a: a9 34                              lda     #$34
a80c: 85 16                              sta     $16
a80e: a9 a8                              lda     #$a8
a810: 85 17                              sta     $17
a812: a9 ff                              lda     #$ff
a814: 85 18                              sta     $18
a816: 20 42 60                           jsr     <a href="#SymGAME2_calc_hires_textpos">GAME2_calc_hires_textpos</a>
a819: 4c 45 60                           jmp     <a href="#SymGAME2_writetile">GAME2_writetile</a>

a81c: a5 31        <a name="SymLA81C">LA81C</a>                 lda     $31
a81e: 85 05                              sta     $05
a820: a5 32                              lda     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
a822: 85 06                              sta     $06
a824: 20 21 77                           jsr     <a href="#SymGAME2_txtpos_to_addr">GAME2_txtpos_to_addr</a>
a827: a0 00                              ldy     #$00
a829: b1 11                              lda     (<a href="#Symtemp11_textlo">temp11_textlo</a>),y
a82b: 20 03 60                           jsr     <a href="#SymGAME2_drawtile">GAME2_drawtile</a>
a82e: 20 03 6b                           jsr     <a href="#SymGAME2_draw_player">GAME2_draw_player</a>
a831: 4c 15 6b                           jmp     $6b15

a834: 7f                                 .dd1    $7f
a835: 7f                                 .dd1    $7f
a836: 63 63 63 63                        .str    “cccc”
a83a: 7f                                 .dd1    $7f
a83b: 7f                                 .dd1    $7f
a83c: 45 4e 20 20                        .str    “EN  ”

a840: 4c 63 a8     <a name="SymSCRN_warm_start">SCRN_warm_start</a>       jmp     <a href="#Symwarm_start">warm_start</a>

a843: 4c                                 .dd1    $4c
a844: 1d                                 .dd1    $1d
a845: ae                                 .dd1    $ae

a846: 4c 50 a8     <a name="Symstart_vec">start_vec</a>             jmp     <a href="#Symcold_start">cold_start</a>              ;set hires and warm start

a849: 4c c9 ae     <a name="SymSCRN_sound_status">SCRN_sound_status</a>     jmp     <a href="#Symsound_status">sound_status</a>

a84c: 4c f2 ae                           jmp     <a href="#SymLAEF2">LAEF2</a>                   ;may be unused

a84f: 60           <a name="Symrts">rts</a>                   rts

a850: a9 40        <a name="Symcold_start">cold_start</a>            lda     #$40
a852: a2 20                              ldx     #$20
a854: 20 33 60                           jsr     <a href="#SymGAME2_clearpages">GAME2_clearpages</a>        ;Clear hires page 2 (was SCREEN)
a857: ad 50 c0                           lda     <a href="#SymTXTCLR">TXTCLR</a>
a85a: ad 52 c0                           lda     <a href="#SymMIXCLR">MIXCLR</a>
a85d: ad 55 c0                           lda     <a href="#SymTXTPAGE2">TXTPAGE2</a>
a860: ad 57 c0                           lda     <a href="#SymHIRES">HIRES</a>                   ;Set hires page 2 fullscreen
a863: a9 00        <a name="Symwarm_start">warm_start</a>            lda     #$00
a865: 85 83                              sta     <a href="#SymwaitMelody">waitMelody</a>
                   <span style="background-color: #cb9099">NOTE: how is $d0 set ... zp swap? set to 0 on startup. when set to $80, it skips</span>
                   <span style="background-color: #cb9099">the demo and goes direct to menu. after demo it is set to $01. I don't notice</span>
                   <span style="background-color: #cb9099">any difference between $d0 == ff and $d0 == 80.</span>
a867: a5 d0                              lda     $d0
a869: 30 11                              bmi     @d0_neg
a86b: d0 0b                              bne     @d0_pos_nonzero
a86d: a9 0d                              lda     #$0d                    ;$d0 == 0
a86f: 85 c9                              sta     $c9
a871: a9 01                              lda     #$01
a873: 85 d0                              sta     $d0                     ;$d0 == 1
a875: 4c 27 60                           jmp     <a href="#SymGAME2_intro">GAME2_intro</a>

a878: a9 ff        @d0_pos_nonzero       lda     #$ff                    ;when $d0 = $01..7f, set to $ff
a87a: 85 d0                              sta     $d0                     ;$d0 now guaranteed to be $80..$ff
a87c: a9 00        @d0_neg               lda     #$00
a87e: 85 c9                              sta     $c9
a880: 85 c4                              sta     <a href="#SymDEMOFLG">DEMOFLG</a>
a882: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
a885: a9 01                              lda     #$01
a887: 20 4f a8                           jsr     <a href="#Symrts">rts</a>                     ;nop??
a88a: a5 1b                              lda     <a href="#SymMAPPOS">MAPPOS</a>
a88c: 85 d2                              sta     $d2
a88e: a5 1c                              lda     <a href="#SymMAPHALF">MAPHALF</a>
a890: 85 d3                              sta     $d3
a892: a9 9d                              lda     #$9d
a894: 85 1b                              sta     <a href="#SymMAPPOS">MAPPOS</a>
a896: a9 00                              lda     #$00
a898: 85 1c                              sta     <a href="#SymMAPHALF">MAPHALF</a>
a89a: 20 1e 60                           jsr     <a href="#SymGAME2_read_playfield">GAME2_read_playfield</a>
a89d: 20 b1 ad     <a name="SymLA89D">LA89D</a>                 jsr     <a href="#SymLADB1">LADB1</a>
a8a0: 20 bd ad                           jsr     <a href="#SymLADBD">LADBD</a>
a8a3: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
a8a6: 20 2a 6b     <a name="SymLA8A6">LA8A6</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
a8a9: d0 2a                              bne     <a href="#Symstart_quest">start_quest</a>
a8ab: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
a8ad: f0 f7                              beq     <a href="#SymLA8A6">LA8A6</a>
a8af: 10 09                              bpl     <a href="#SymLA8BA">LA8BA</a>
a8b1: a5 d7                              lda     $d7
a8b3: f0 f1                              beq     <a href="#SymLA8A6">LA8A6</a>
a8b5: c6 d7                              dec     $d7
a8b7: 4c c2 a8                           jmp     <a href="#SymLA8C2">LA8C2</a>

a8ba: a5 d7        <a name="SymLA8BA">LA8BA</a>                 lda     $d7
a8bc: c9 03                              cmp     #$03
a8be: f0 e6                              beq     <a href="#SymLA8A6">LA8A6</a>
a8c0: e6 d7                              inc     $d7
a8c2: 20 b1 ad     <a name="SymLA8C2">LA8C2</a>                 jsr     <a href="#SymLADB1">LADB1</a>
a8c5: 20 bd ad                           jsr     <a href="#SymLADBD">LADBD</a>
a8c8: a2 00                              ldx     #$00
a8ca: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
a8cd: a2 50                              ldx     #$50
a8cf: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
a8d2: 4c a6 a8                           jmp     <a href="#SymLA8A6">LA8A6</a>

a8d5: a5 d7        <a name="Symstart_quest">start_quest</a>           lda     $d7
a8d7: d0 03                              bne     <a href="#Symcontinue_quest">continue_quest</a>
a8d9: 4c ed a8                           jmp     <a href="#Syminit_choose_player">init_choose_player</a>

a8dc: c9 01        <a name="Symcontinue_quest">continue_quest</a>        cmp     #$01
a8de: d0 03                              bne     <a href="#Symstorage_disk">storage_disk</a>
a8e0: 4c 4c ab                           jmp     <a href="#Symcontinue_quest0">continue_quest0</a>

a8e3: c9 02        <a name="Symstorage_disk">storage_disk</a>          cmp     #$02
a8e5: d0 03                              bne     <a href="#Symsample_quest">sample_quest</a>
a8e7: 4c 74 ab                           jmp     <a href="#Symsave_load_menu">save_load_menu</a>

a8ea: 4c a6 ad     <a name="Symsample_quest">sample_quest</a>          jmp     <a href="#Symdo_sample_quest">do_sample_quest</a>         ;sample quest?

a8ed: a5 d4        <a name="Syminit_choose_player">init_choose_player</a>    lda     $d4
a8ef: 85 d5                              sta     $d5
a8f1: a5 20                              lda     <a href="#SymPLAYER">PLAYER</a>
a8f3: 85 d4                              sta     $d4
a8f5: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
                   ; Display current player choice (in $d4).
a8f8: 20 0c 60     <a name="Symchoose_player">choose_player</a>         jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a8fb: 07                                 .dd1    $07
a8fc: c3 c8 cf cf+                       .str    ↑“CHOOSE YOUR PLAYER:”
a90f: ff                                 .dd1    $ff
                   ; if ($d4 == 0) {
                   ;   print NERIC -- A KINDAR BORN YOUNG MAN
                   ; } else if ($d4 == 1) {
                   ;   print GENAA -- A KINDAR BORN YOUNG WOMAN
                   ; } ... else {
                   ;   print RETURN TO MENU
                   ; }
a910: a5 d4        <a name="Symchoose_neric">choose_neric</a>          lda     $d4                     ;player choice 0..5
a912: d0 54                              bne     <a href="#Symchoose_genaa">choose_genaa</a>
a914: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a917: 1c                                 .dd1    $1c
a918: ce c5 d2 c9+                       .str    ↑“NERIC”
a91d: ff                                 .dd1    $ff
a91e: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a921: 51                                 .dd1    $51
a922: c1 a0 cb c9+                       .str    ↑“A KINDAR-BORN YOUNG MAN  ”
a93b: ff                                 .dd1    $ff
a93c: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a93f: 79                                 .dd1    $79
a940: d3 d4 d2 cf+                       .str    ↑“STRONG--IMPULSIVE--MODERATE SPIRIT  ”
a964: ff                                 .dd1    $ff
a965: 4c de aa                           jmp     <a href="#Symdo_player_choice">do_player_choice</a>

a968: c9 01        <a name="Symchoose_genaa">choose_genaa</a>          cmp     #<a href="#SymPLAYER_Genaa">PLAYER_Genaa</a>
a96a: d0 54                              bne     <a href="#Symchoose_herd">choose_herd</a>
a96c: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a96f: 1c                                 .dd1    $1c
a970: c7 c5 ce c1+                       .str    ↑“GENAA”
a975: ff                                 .dd1    $ff
a976: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a979: 51                                 .dd1    $51
a97a: c1 a0 cb c9+                       .str    ↑“A KINDAR-BORN YOUNG WOMAN”
a993: ff                                 .dd1    $ff
a994: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a997: 79                                 .dd1    $79
a998: d3 d4 d2 cf+                       .str    ↑“STRONG--CHARISMATIC--NO SPIRIT SKILL”
a9bc: ff                                 .dd1    $ff
a9bd: 4c de aa                           jmp     <a href="#Symdo_player_choice">do_player_choice</a>

a9c0: c9 02        <a name="Symchoose_herd">choose_herd</a>           cmp     #<a href="#SymPLAYER_Herd">PLAYER_Herd</a>
a9c2: d0 54                              bne     <a href="#Symchoose_pomma">choose_pomma</a>
a9c4: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a9c7: 1c                                 .dd1    $1c
a9c8: c8 c5 d2 c4+                       .str    ↑“HERD ”
a9cd: ff                                 .dd1    $ff
a9ce: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a9d1: 51                                 .dd1    $51
a9d2: c1 a0 c3 c1+                       .str    ↑“A CAVERN-BORN ERDLING    ”
a9eb: ff                                 .dd1    $ff
a9ec: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
a9ef: 79                                 .dd1    $79
a9f0: d3 d4 d2 cf+                       .str    ↑“STRONG--RATIONAL--MODERATE SPIRIT   ”
aa14: ff                                 .dd1    $ff
aa15: 4c de aa                           jmp     <a href="#Symdo_player_choice">do_player_choice</a>

aa18: c9 03        <a name="Symchoose_pomma">choose_pomma</a>          cmp     #<a href="#SymPLAYER_Pomma">PLAYER_Pomma</a>
aa1a: d0 54                              bne     <a href="#Symchoose_charn">choose_charn</a>
aa1c: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa1f: 1c                                 .dd1    $1c
aa20: d0 cf cd cd+                       .str    ↑“POMMA”
aa25: ff                                 .dd1    $ff
aa26: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa29: 51                                 .dd1    $51
aa2a: c1 a0 cb c9+                       .str    ↑“A KINDAR GIRL-CHILD      ”
aa43: ff                                 .dd1    $ff
aa44: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa47: 79                                 .dd1    $79
aa48: c4 c5 cc c9+                       .str    ↑“DELICATE--GREATLY SPIRIT GIFTED     ”
aa6c: ff                                 .dd1    $ff
aa6d: 4c de aa                           jmp     <a href="#Symdo_player_choice">do_player_choice</a>

aa70: c9 04        <a name="Symchoose_charn">choose_charn</a>          cmp     #<a href="#SymPLAYER_Charn">PLAYER_Charn</a>
aa72: d0 54                              bne     <a href="#Symchoose_noone">choose_noone</a>
aa74: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa77: 1c                                 .dd1    $1c
aa78: c3 c8 c1 d2+                       .str    ↑“CHARN”
aa7d: ff                                 .dd1    $ff
aa7e: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa81: 51                                 .dd1    $51
aa82: c1 ce a0 c5+                       .str    ↑“AN ERDLING BOY-CHILD     ”
aa9b: ff                                 .dd1    $ff
aa9c: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aa9f: 79                                 .dd1    $79
aaa0: d3 d4 d5 d2+                       .str    ↑“STURDY--ALERT--MODERATE SPIRIT GIFT ”
aac4: ff                                 .dd1    $ff
aac5: 4c de aa                           jmp     <a href="#Symdo_player_choice">do_player_choice</a>

aac8: 20 06 60     <a name="Symchoose_noone">choose_noone</a>          jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
aacb: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aace: 0c                                 .dd1    $0c
aacf: d2 c5 d4 d5+                       .str    ↑“RETURN TO MENU”
aadd: ff                                 .dd1    $ff
aade: a2 01        <a name="Symdo_player_choice">do_player_choice</a>      ldx     #$01                    ;play sound 1 (high pitched beep)
aae0: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
aae3: a2 a0                              ldx     #$a0
aae5: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
                   <span style="background-color: #cb8300">NOTE: </span>
aae8: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>   ;GAME2 menu vec
aaeb: 20 2a 6b     @loop                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>        ;GAME2 vec
aaee: d0 12                              bne     <a href="#SymLAB02">LAB02</a>
aaf0: a5 86                              lda     <a href="#SymYDIR">YDIR</a>
aaf2: 10 f7                              bpl     @loop
aaf4: a6 d4                              ldx     $d4                     ;move down 1 menu row
aaf6: e8                                 inx
aaf7: e0 06                              cpx     #$06                    ;past end of menu?
aaf9: d0 02                              bne     @next
aafb: a2 00                              ldx     #$00                    ;wrap around to neric
aafd: 86 d4        @next                 stx     $d4
aaff: 4c f8 a8                           jmp     <a href="#Symchoose_player">choose_player</a>

ab02: 20 06 60     <a name="SymLAB02">LAB02</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ab05: a5 d4                              lda     $d4
ab07: c9 05                              cmp     #$05
ab09: d0 07                              bne     <a href="#SymLAB12">LAB12</a>
ab0b: a5 d5                              lda     $d5
ab0d: 85 d4                              sta     $d4
ab0f: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ab12: c5 20        <a name="SymLAB12">LAB12</a>                 cmp     <a href="#SymPLAYER">PLAYER</a>
ab14: f0 03                              beq     <a href="#SymLAB19">LAB19</a>
ab16: 20 1d ae                           jsr     <a href="#Symread_char_data">read_char_data</a>
ab19: 20 3f 60     <a name="SymLAB19">LAB19</a>                 jsr     <a href="#SymGAME2_init_item_state">GAME2_init_item_state</a>
ab1c: a9 b2                              lda     #$b2
ab1e: a2 01                              ldx     #$01
ab20: 20 33 60                           jsr     <a href="#SymGAME2_clearpages">GAME2_clearpages</a>
ab23: 20 39 60                           jsr     <a href="#SymGAME2_player_init">GAME2_player_init</a>
ab26: a9 ff                              lda     #$ff
ab28: 85 b8                              sta     <a href="#SymfoodRestTimer">foodRestTimer</a>
ab2a: a5 2d                              lda     <a href="#SymhomePos">homePos</a>
ab2c: 85 1b                              sta     <a href="#SymMAPPOS">MAPPOS</a>
ab2e: a5 2e                              lda     <a href="#SymhomeHalf">homeHalf</a>
ab30: 85 1c                              sta     <a href="#SymMAPHALF">MAPHALF</a>
ab32: a9 01                              lda     #$01
ab34: 85 67                              sta     <a href="#SymINSIDE">INSIDE</a>
ab36: a5 2f                              lda     <a href="#SymhomeX">homeX</a>
ab38: 85 31                              sta     $31
ab3a: a5 30                              lda     <a href="#SymhomeY">homeY</a>
ab3c: 85 32                              sta     <a href="#SymMON_INVFLAG">MON_INVFLAG</a>
ab3e: a9 00                              lda     #$00
ab40: 85 6b                              sta     <a href="#Symzp6b_npcHere">zp6b_npcHere</a>
ab42: 20 1e 60                           jsr     <a href="#SymGAME2_read_playfield">GAME2_read_playfield</a>
ab45: a9 01                              lda     #$01
ab47: 85 ba                              sta     $ba
ab49: 4c 3c 60                           jmp     $603c

ab4c: a5 ba        <a name="Symcontinue_quest0">continue_quest0</a>       lda     $ba
ab4e: d0 03                              bne     <a href="#SymLAB53">LAB53</a>
ab50: 4c a6 a8                           jmp     <a href="#SymLA8A6">LA8A6</a>                   ;jump back to start quest

ab53: 20 06 60     <a name="SymLAB53">LAB53</a>                 jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ab56: a5 d4                              lda     $d4
ab58: c5 20                              cmp     <a href="#SymPLAYER">PLAYER</a>
ab5a: f0 05                              beq     <a href="#SymLAB61">LAB61</a>
ab5c: 85 20                              sta     <a href="#SymPLAYER">PLAYER</a>
ab5e: 20 1d ae                           jsr     <a href="#Symread_char_data">read_char_data</a>
ab61: a9 01        <a name="SymLAB61">LAB61</a>                 lda     #$01
ab63: 20 21 6b                           jsr     $6b21
ab66: a5 d2                              lda     $d2
ab68: 85 1b                              sta     <a href="#SymMAPPOS">MAPPOS</a>
ab6a: a5 d3                              lda     $d3
ab6c: 85 1c                              sta     <a href="#SymMAPHALF">MAPHALF</a>
ab6e: 20 2a 60                           jsr     $602a
ab71: 4c 2d 60                           jmp     $602d

ab74: 20 06 60     <a name="Symsave_load_menu">save_load_menu</a>        jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ab77: 20 0c 60     <a name="Symsave_load_menu0">save_load_menu0</a>       jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ab7a: 01                                 .dd1    $01
ab7b: a0 d3 c1 d6+                       .str    ↑“ SAVE GAME  LOAD GAME  RETURN TO MENU ”
aba1: ff                                 .dd1    $ff
aba2: a9 01                              lda     #$01
aba4: 85 66                              sta     $66
aba6: a5 d6                              lda     $d6
aba8: d0 13                              bne     @load_game
abaa: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
abad: 01                                 .dd1    $01
abae: a0 d3 c1 d6+                       .str    ↑“ SAVE GAME ”
abb9: ff                                 .dd1    $ff
abba: 4c e9 ab                           jmp     <a href="#SymLABE9">LABE9</a>

abbd: c9 01        @load_game            cmp     #$01
abbf: d0 13                              bne     @return_to_menu
abc1: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
abc4: 0c                                 .dd1    $0c
abc5: a0 cc cf c1+                       .str    ↑“ LOAD GAME ”
abd0: ff                                 .dd1    $ff
abd1: 4c e9 ab                           jmp     <a href="#SymLABE9">LABE9</a>

abd4: 20 0c 60     @return_to_menu       jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
abd7: 17                                 .dd1    $17
abd8: a0 d2 c5 d4+                       .str    ↑“ RETURN TO MENU ”
abe8: ff                                 .dd1    $ff
abe9: a2 01        <a name="SymLABE9">LABE9</a>                 ldx     #$01
abeb: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
abee: a2 a0                              ldx     #$a0
abf0: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
abf3: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
abf6: 20 2a 6b     <a name="SymLABF6">LABF6</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
abf9: d0 12                              bne     <a href="#SymLAC0D">LAC0D</a>
abfb: a5 85                              lda     <a href="#SymXDIR">XDIR</a>
abfd: f0 f7                              beq     <a href="#SymLABF6">LABF6</a>
abff: 18                                 clc
ac00: 65 d6                              adc     $d6
ac02: 30 f2                              bmi     <a href="#SymLABF6">LABF6</a>
ac04: c9 03                              cmp     #$03
ac06: f0 ee                              beq     <a href="#SymLABF6">LABF6</a>
ac08: 85 d6                              sta     $d6
ac0a: 4c 77 ab                           jmp     <a href="#Symsave_load_menu0">save_load_menu0</a>

ac0d: a5 d6        <a name="SymLAC0D">LAC0D</a>                 lda     $d6
ac0f: d0 0a                              bne     <a href="#SymLAC1B">LAC1B</a>
ac11: a5 ba                              lda     $ba
ac13: d0 10                              bne     <a href="#Symselect_save_quest">select_save_quest</a>
ac15: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ac18: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ac1b: c9 01        <a name="SymLAC1B">LAC1B</a>                 cmp     #$01
ac1d: f0 06                              beq     <a href="#Symselect_save_quest">select_save_quest</a>
ac1f: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ac22: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ac25: 20 0c 60     <a name="Symselect_save_quest">select_save_quest</a>     jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac28: 59                                 .dd1    $59
ac29: a0 d1 d5 c5+                       .str    ↑“ QUEST   1  2  3  4  5 ”
ac40: ff                                 .dd1    $ff
ac41: a9 01                              lda     #$01
ac43: 85 66                              sta     $66
ac45: a5 da                              lda     <a href="#SymQUEST">QUEST</a>
ac47: d0 0b                              bne     <a href="#Symquest_2">quest_2</a>
ac49: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac4c: 61                                 .dd1    $61
ac4d: a0 b1 a0                           .str    ↑“ 1 ”
ac50: ff                                 .dd1    $ff
ac51: 4c 89 ac                           jmp     <a href="#SymLAC89">LAC89</a>

ac54: c9 01        <a name="Symquest_2">quest_2</a>               cmp     #$01
ac56: d0 0b                              bne     <a href="#Symquest_3">quest_3</a>
ac58: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac5b: 64                                 .dd1    $64
ac5c: a0 b2 a0                           .str    ↑“ 2 ”
ac5f: ff                                 .dd1    $ff
ac60: 4c 89 ac                           jmp     <a href="#SymLAC89">LAC89</a>

ac63: c9 02        <a name="Symquest_3">quest_3</a>               cmp     #$02
ac65: d0 0b                              bne     <a href="#Symquest_4">quest_4</a>
ac67: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac6a: 67                                 .dd1    $67
ac6b: a0 b3 a0                           .str    ↑“ 3 ”
ac6e: ff                                 .dd1    $ff
ac6f: 4c 89 ac                           jmp     <a href="#SymLAC89">LAC89</a>

ac72: c9 03        <a name="Symquest_4">quest_4</a>               cmp     #$03
ac74: d0 0b                              bne     <a href="#Symquest_5">quest_5</a>
ac76: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac79: 6a                                 .dd1    $6a
ac7a: a0 b4 a0                           .str    ↑“ 4 ”
ac7d: ff                                 .dd1    $ff
ac7e: 4c 89 ac                           jmp     <a href="#SymLAC89">LAC89</a>

ac81: 20 0c 60     <a name="Symquest_5">quest_5</a>               jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ac84: 6d                                 .dd1    $6d
ac85: a0 b5 a0                           .str    ↑“ 5 ”
ac88: ff                                 .dd1    $ff
ac89: a2 00        <a name="SymLAC89">LAC89</a>                 ldx     #$00
ac8b: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
ac8e: a2 80                              ldx     #$80
ac90: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
ac93: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
ac96: 20 2a 6b     <a name="SymLAC96">LAC96</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
ac99: d0 12                              bne     <a href="#Syminsert_storage_disk">insert_storage_disk</a>
ac9b: a5 85                              lda     <a href="#SymXDIR">XDIR</a>
ac9d: f0 f7                              beq     <a href="#SymLAC96">LAC96</a>
ac9f: 18                                 clc
aca0: 65 da                              adc     <a href="#SymQUEST">QUEST</a>
aca2: 30 f2                              bmi     <a href="#SymLAC96">LAC96</a>
aca4: c9 05                              cmp     #$05
aca6: f0 ee                              beq     <a href="#SymLAC96">LAC96</a>
aca8: 85 da                              sta     <a href="#SymQUEST">QUEST</a>
acaa: 4c 25 ac                           jmp     <a href="#Symselect_save_quest">select_save_quest</a>

acad: 20 06 60     <a name="Syminsert_storage_disk">insert_storage_disk</a>   jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
acb0: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
acb3: 01                                 .dd1    $01
acb4: c9 ce d3 c5+                       .str    ↑“INSERT STORAGE DISK - PRESS TRIGGER”
acd7: ff                                 .dd1    $ff
acd8: a2 01                              ldx     #$01
acda: 20 03 b6                           jsr     <a href="#SymSCRN_play_sound">SCRN_play_sound</a>
acdd: a2 a0                              ldx     #$a0
acdf: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
ace2: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
ace5: 20 2a 6b     @again                jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
ace8: f0 fb                              beq     @again
acea: a5 da                              lda     <a href="#SymQUEST">QUEST</a>
acec: 18                                 clc
aced: 69 30                              adc     #$30
acef: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
acf2: a5 d6                              lda     $d6
acf4: f0 03                              beq     <a href="#Symsave_game_data">save_game_data</a>
acf6: 4c 45 ad                           jmp     <a href="#Symload_game_data">load_game_data</a>

                   ; Writes game data to storage disk. Copies game data from the 5 pages $B2..$B5
                   ; and page $00 to the RWTS buffer at $0200, and writes it to sectors $00..$04 of
                   ; a single track $01..$05 (depending on the save slot or "quest").
                   sect                  .var    $08    {addr/1}         ;current sector

acf9: a5 d2        <a name="Symsave_game_data">save_game_data</a>        lda     $d2
acfb: 85 1b                              sta     <a href="#SymMAPPOS">MAPPOS</a>
acfd: a5 d3                              lda     $d3
acff: 85 1c                              sta     <a href="#SymMAPHALF">MAPHALF</a>
ad01: a9 02                              lda     #<a href="#SymRWTSCMD_write">RWTSCMD_write</a>          ;WRITE
ad03: 8d 0c 03                           sta     <a href="#SymRWTS_IOB_command">RWTS_IOB_command</a>
ad06: a9 00                              lda     #$00
ad08: 8d 05 03                           sta     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>
ad0b: 85 08                              sta     sect
ad0d: a6 da                              ldx     <a href="#SymQUEST">QUEST</a>                   ;selected save slot
ad0f: bd 3b ad                           lda     <a href="#Symsave_track">save_track</a>,x
ad12: 8d 04 03                           sta     <a href="#SymRWTS_IOB_track">RWTS_IOB_track</a>
ad15: a6 08        @loop                 ldx     sect
ad17: bd 40 ad                           lda     <a href="#Sympages_to_save">pages_to_save</a>,x         ;copy page $B2,$B3,$B4,$B5,$00
ad1a: a2 01                              ldx     #$01                    ;(1 page)
ad1c: a0 02                              ldy     #&gt;<a href="#SymRWTSBUF">RWTSBUF</a>               ;copy to $200
ad1e: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>
ad21: 20 15 60                           jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>           ;preserve zp
ad24: 20 15 03                           jsr     <a href="#SymDIRECT_RWTS">DIRECT_RWTS</a>             ;write the sector
ad27: 20 15 60                           jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>           ;restore zp
ad2a: ee 05 03                           inc     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>         ;next sector and page
ad2d: e6 08                              inc     sect
ad2f: a5 08                              lda     sect
ad31: c9 05                              cmp     #$05                    ;have we copied all 5 pages
ad33: d0 e0                              bne     @loop                   ;no, loop
ad35: 20 98 ae                           jsr     <a href="#Syminsert_side_2_trig">insert_side_2_trig</a>
ad38: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ad3b: 01 02 03 04+ <a name="Symsave_track">save_track</a>            .bulk   0102030405
ad40: b2 b3 b4 b5+ <a name="Sympages_to_save">pages_to_save</a>         .bulk   b2b3b4b500

                   ; Load save game data. Read sectors $00..$04 of single track $01..$05 (indexed
                   ; by quest #) into page $b2..$b5 and $00. Preserve the user's current settings
                   ; of sound on/off and joystick/keyboard in page $00. If the loaded game is using
                   ; a different player, load their sprite data as well.
ad45: a5 20        <a name="Symload_game_data">load_game_data</a>        lda     <a href="#SymPLAYER">PLAYER</a>                  ;save critical flags which
ad47: 48                                 pha                             ;may differ in loaded zero page
ad48: a5 b1                              lda     <a href="#SymJOYFLG">JOYFLG</a>
ad4a: 48                                 pha
ad4b: a5 4a                              lda     <a href="#SymSOUNDFLG">SOUNDFLG</a>
ad4d: 48                                 pha
ad4e: a9 01                              lda     #$01                    ;READ
ad50: 8d 0c 03                           sta     <a href="#SymRWTS_IOB_command">RWTS_IOB_command</a>
ad53: a6 da                              ldx     <a href="#SymQUEST">QUEST</a>                   ;which save slot
ad55: bd 3b ad                           lda     <a href="#Symsave_track">save_track</a>,x
ad58: 8d 04 03                           sta     <a href="#SymRWTS_IOB_track">RWTS_IOB_track</a>
ad5b: a9 00                              lda     #$00
ad5d: 8d 05 03                           sta     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>
ad60: 85 08                              sta     sect
ad62: 20 15 60     @loop                 jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>
ad65: 20 15 03                           jsr     <a href="#SymDIRECT_RWTS">DIRECT_RWTS</a>
ad68: 20 15 60                           jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>
ad6b: a6 08                              ldx     sect
ad6d: bd 40 ad                           lda     <a href="#Sympages_to_save">pages_to_save</a>,x
ad70: f0 10                              beq     @restore_zp             ;zero page (always last loaded)
ad72: a8                                 tay
ad73: a9 02                              lda     #&gt;<a href="#SymRWTSBUF">RWTSBUF</a>               ;copy a page from sector buffer
ad75: a2 01                              ldx     #$01
ad77: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>
ad7a: ee 05 03                           inc     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>
ad7d: e6 08                              inc     sect
ad7f: 4c 62 ad                           jmp     @loop

                   ; Continuing from load_game_data...
ad82: a0 00        @restore_zp           ldy     #$00                    ;restore zero page data
ad84: b9 00 02     @loop                 lda     <a href="#SymRWTSBUF">RWTSBUF</a>,y               ;from read sector
ad87: 99 00 00                           sta     $0000,y
ad8a: c8                                 iny
ad8b: d0 f7                              bne     @loop
ad8d: 68                                 pla                             ;restore 3 saved flags
ad8e: 85 4a                              sta     <a href="#SymSOUNDFLG">SOUNDFLG</a>
ad90: 68                                 pla
ad91: 85 b1                              sta     <a href="#SymJOYFLG">JOYFLG</a>
ad93: 68                                 pla
ad94: c5 20                              cmp     <a href="#SymPLAYER">PLAYER</a>                  ;is the save using the active character?
ad96: f0 08                              beq     @load_done              ;yes, done loading data
ad98: 85 20                              sta     <a href="#SymPLAYER">PLAYER</a>                  ;no, update character
ad9a: 20 1d ae                           jsr     <a href="#Symread_char_data">read_char_data</a>          ;and read their data
ad9d: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ada0: 20 98 ae     @load_done            jsr     <a href="#Syminsert_side_2_trig">insert_side_2_trig</a>      ;swap game disk back in
ada3: 4c 9d a8                           jmp     <a href="#SymLA89D">LA89D</a>

ada6: a9 0d        <a name="Symdo_sample_quest">do_sample_quest</a>       lda     #$0d
ada8: 85 c9                              sta     $c9
adaa: a9 00                              lda     #$00
adac: 85 ba                              sta     $ba
adae: 4c 27 60                           jmp     <a href="#SymGAME2_intro">GAME2_intro</a>

adb1: 20 c5 ad     <a name="SymLADB1">LADB1</a>                 jsr     <a href="#Symprint_start_game">print_start_game</a>
adb4: 20 dd ad                           jsr     <a href="#Symprint_continue">print_continue</a>
adb7: 20 f5 ad                           jsr     <a href="#Symprint_disk_storage">print_disk_storage</a>
adba: 4c 09 ae                           jmp     <a href="#Symprint_sample_quest">print_sample_quest</a>

adbd: a9 01        <a name="SymLADBD">LADBD</a>                 lda     #$01                    ;this extra code is here for highlighting
adbf: 85 66                              sta     $66
adc1: a5 d7                              lda     $d7
adc3: d0 14                              bne     <a href="#SymLADD9">LADD9</a>
adc5: 20 0c 60     <a name="Symprint_start_game">print_start_game</a>      jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
adc8: 0d                                 .dd1    $0d
adc9: a0 a0 d3 d4+                       .str    ↑“  START GAME  ”
add7: ff                                 .dd1    $ff
add8: 60                                 rts

add9: c9 01        <a name="SymLADD9">LADD9</a>                 cmp     #$01
addb: d0 14                              bne     <a href="#SymLADF1">LADF1</a>
addd: 20 0c 60     <a name="Symprint_continue">print_continue</a>        jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ade0: 35                                 .dd1    $35
ade1: a0 a0 a0 c3+                       .str    ↑“   CONTINUE   ”
adef: ff                                 .dd1    $ff
adf0: 60                                 rts

adf1: c9 02        <a name="SymLADF1">LADF1</a>                 cmp     #$02
adf3: d0 14                              bne     <a href="#Symprint_sample_quest">print_sample_quest</a>
adf5: 20 0c 60     <a name="Symprint_disk_storage">print_disk_storage</a>    jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
adf8: 5d                                 .dd1    $5d
adf9: a0 c4 c9 d3+                       .str    ↑“ DISK STORAGE ”
ae07: ff                                 .dd1    $ff
ae08: 60                                 rts

ae09: 20 0c 60     <a name="Symprint_sample_quest">print_sample_quest</a>    jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ae0c: 85                                 .dd1    $85
ae0d: a0 d3 c1 cd+                       .str    ↑“ SAMPLE QUEST ”
ae1b: ff                                 .dd1    $ff
ae1c: 60                                 rts

                   ; This prompts to insert side 1, then reads game data from a single track
                   ; $05..$09 (based on selected character), sectors $00..$0B into $2000..$2BFF.
                   ; This explains the orphaned sectors on T05..09 on side 1, and why the character
                   ; is invisible if these sectors are left out. Neric's data (character 0) is
                   ; preloaded as part of GAME1, available during the demo, and you are not
                   ; prompted if you select him.
                   readpage              .var    $dc    {addr/1}         ;current sector

ae1d: 20 06 60     <a name="Symread_char_data">read_char_data</a>        jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ae20: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ae23: 01                                 .dd1    $01
ae24: a0 a0 a0 c9+                       .str    ↑“   INSERT SIDE 1 - PRESS TRIGGER”
ae44: ff                                 .dd1    $ff
ae45: a2 ff                              ldx     #$ff
ae47: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
ae4a: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
ae4d: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
ae50: 20 2a 6b     @again                jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
ae53: f0 fb                              beq     @again
ae55: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
ae58: a4 d4                              ldy     $d4                     ;selected character
ae5a: b9 93 ae                           lda     <a href="#Symchar_tracks">char_tracks</a>,y           ;track 05..09
ae5d: 8d 04 03                           sta     <a href="#SymRWTS_IOB_track">RWTS_IOB_track</a>
ae60: a9 00                              lda     #$00
ae62: 8d 05 03                           sta     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>
ae65: a9 01                              lda     #$01                    ;read
ae67: 8d 0c 03                           sta     <a href="#SymRWTS_IOB_command">RWTS_IOB_command</a>
ae6a: a9 20                              lda     #$20
ae6c: 85 dc                              sta     readpage
ae6e: 20 15 60     @loop                 jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>
ae71: 20 15 03                           jsr     <a href="#SymDIRECT_RWTS">DIRECT_RWTS</a>
ae74: 20 15 60                           jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>
ae77: a9 02                              lda     #$02
ae79: a4 dc                              ldy     readpage
ae7b: a2 01                              ldx     #$01
ae7d: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>
ae80: ee 05 03                           inc     <a href="#SymRWTS_IOB_sector">RWTS_IOB_sector</a>
ae83: e6 dc                              inc     readpage
ae85: a5 dc                              lda     readpage
ae87: c9 2c                              cmp     #$2c                    ;read into page $20..$2B?
ae89: d0 e3                              bne     @loop                   ;no, read more
ae8b: a5 d4                              lda     $d4
ae8d: 85 20                              sta     <a href="#SymPLAYER">PLAYER</a>
ae8f: 20 98 ae                           jsr     <a href="#Syminsert_side_2_trig">insert_side_2_trig</a>
ae92: 60                                 rts

ae93: 05 06 07 08+ <a name="Symchar_tracks">char_tracks</a>           .bulk   0506070809

ae98: 20 0c 60     <a name="Syminsert_side_2_trig">insert_side_2_trig</a>    jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
ae9b: 01                                 .dd1    $01
ae9c: a0 a0 a0 c9+                       .str    ↑“   INSERT SIDE 2 - PRESS TRIGGER”
aebc: ff                                 .dd1    $ff
aebd: 20 0c 77                           jsr     <a href="#SymGAME2_await_button_up">GAME2_await_button_up</a>
aec0: 20 2a 6b     <a name="SymLAEC0">LAEC0</a>                 jsr     <a href="#SymGAME2_menu_input">GAME2_menu_input</a>
aec3: f0 fb                              beq     <a href="#SymLAEC0">LAEC0</a>
aec5: 20 06 60                           jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
aec8: 60                                 rts

aec9: 20 06 60     <a name="Symsound_status">sound_status</a>          jsr     <a href="#SymGAME2_cleartext">GAME2_cleartext</a>
aecc: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aecf: 0c                                 .dd1    $0c
aed0: d3 cf d5 ce+                       .str    ↑“SOUND IS NOW O”
aede: ff                                 .dd1    $ff
aedf: a5 4a                              lda     <a href="#SymSOUNDFLG">SOUNDFLG</a>
aee1: d0 08                              bne     @sound_is_on
aee3: 20 0c 60                           jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aee6: 1a                                 .dd1    $1a
aee7: c6 c6                              .str    ↑“FF”
aee9: ff                                 .dd1    $ff
aeea: 60                                 rts

aeeb: 20 0c 60     @sound_is_on          jsr     <a href="#SymGAME2_PRNTSTR">GAME2_PRNTSTR</a>
aeee: 1a                                 .dd1    $1a
aeef: ce                                 .str    ↑“N”
aef0: ff                                 .dd1    $ff
aef1: 60                                 rts

aef2: 20 2d 6b     <a name="SymLAEF2">LAEF2</a>                 jsr     $6b2d                   ;GAME2 jmp vec
aef5: 20 21 6b                           jsr     $6b21                   ;GAME2 jmp vec
aef8: 60                                 rts

aef9: 08 cd 02 23+                       .junk   7

                                         .org    $b600
                   ; External vectors
b600: 4c 0c b6     <a name="SymSCRN_play_melody">SCRN_play_melody</a>      jmp     <a href="#Symplay_melody">play_melody</a>             ;A=?

b603: 4c 45 b6     <a name="SymSCRN_play_sound">SCRN_play_sound</a>       jmp     <a href="#Symplay_sound">play_sound</a>

b606: 4c 93 b6     <a name="SymSCRN_play_sound_0">SCRN_play_sound_0</a>     jmp     <a href="#Symplay_sound_0">play_sound_0</a>

b609: 4c dc b6     <a name="SymSCRN_chkkey">SCRN_chkkey</a>           jmp     <a href="#Symchkkey">chkkey</a>                  ;from $6b27

b60c: aa           <a name="Symplay_melody">play_melody</a>           tax
b60d: a5 4a                              lda     <a href="#SymSOUNDFLG">SOUNDFLG</a>                ;flag? if non-zero, continue with next subroutine
b60f: d0 06                              bne     <a href="#Symplay_melody_">play_melody_</a>
b611: a2 14                              ldx     #$14
b613: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
b616: 60                                 rts

                   ; Plays melody specified by X, where X := 00..0A. Like play_sound, but with an
                   ; extra level of indirection -- X now indexes into a sound address table to
                   ; select a sound data stream, which is composed of pairs of X,Y sound
                   ; components, terminated by $ff. The game is frozen during this time.
                   ; 
                   ; play_sound by contrast plays a single X,Y sound indexed by X. My theory is the
                   ; game may iterate through X values and repeatedly call play_sound, which allows
                   ; this stream to be played without freezing the game, so it might be a footstep.
                   idx                   .var    $4d    {addr/1}
                   addrtbl               .var    $4e    {addr/2}         ;address table

b617: bd 20 1e     <a name="Symplay_melody_">play_melody_</a>          lda     <a href="#SymGAME1_melodies_lo">GAME1_melodies_lo</a>,x     ;X was A on vector entry. X:=$00..$0A
b61a: 85 4e                              sta     addrtbl
b61c: bd 30 1e                           lda     <a href="#SymGAME1_melodies_hi">GAME1_melodies_hi</a>,x
b61f: 85 4f                              sta     addrtbl+1
b621: a9 00                              lda     #$00
b623: 85 4d                              sta     idx                     ;index into addrtbl data
b625: a4 4d        @note                 ldy     idx
b627: b1 4e                              lda     (addrtbl),y
b629: c9 ff                              cmp     #$ff                    ;items are terminated with $ff
b62b: f0 17                              beq     @rts
b62d: 20 b0 b6                           jsr     @next_addrtbl           ;y=y+1 and bumps addrtbl hi on wrap
b630: aa                                 tax
b631: b1 4e                              lda     (addrtbl),y
b633: 20 b0 b6                           jsr     @next_addrtbl           ;y=y+1 and bumps addrtbl hi on wrap
b636: 84 4d                              sty     idx                     ;preserve Y for loop
b638: a8                                 tay
b639: 20 b7 b6                           jsr     <a href="#Symplay_tone">play_tone</a>               ;must take X (1st addrtbl byte) &amp; Y (2nd addrtbl byte)
b63c: a9 64                              lda     #$64
b63e: 20 d0 b6                           jsr     <a href="#SymdelayAA">delayAA</a>                 ;delay $64*$64 = 10000 times
b641: 4c 25 b6                           jmp     @note

b644: 60           @rts                  rts

                   ; X is the sound # to play, indexed into sound_data_Y. If this value is $ff, it
                   ; plays the hardcoded sample 1. Otherwise, sound_data_Y is used as the Y
                   ; component and sound_data_X is used as the X component to play what is possibly
                   ; a tone.
                   ; 
                   ; It's possible this is one long sample, played over time by iterating X from 0
                   ; to 13.
b645: a5 4a        <a name="Symplay_sound">play_sound</a>            lda     <a href="#SymSOUNDFLG">SOUNDFLG</a>                ;Is sound on?
b647: d0 06                              bne     @play_sound             ;yes, play sound
b649: a2 14                              ldx     #$14                    ;no, short delay and continue
b64b: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
b64e: 60                                 rts

b64f: bd 72 b6     @play_sound           lda     <a href="#Symsound_data_Y">sound_data_Y</a>,x
b652: f0 1d                              beq     @rts
b654: 30 08                              bmi     <a href="#Symplay_sample_1">play_sample_1</a>
b656: a8                                 tay
b657: bd 80 b6                           lda     <a href="#Symsound_data_X">sound_data_X</a>,x
b65a: aa                                 tax
b65b: 4c b7 b6                           jmp     <a href="#Symplay_tone">play_tone</a>

                   ; Hardcoded to play sample_data_1. Simply clicks the speaker once for each byte,
                   ; and delays proportional to the byte value, before the next click.
b65e: a2 00        <a name="Symplay_sample_1">play_sample_1</a>         ldx     #$00
b660: ad 30 c0     @click                lda     <a href="#SymSPKR">SPKR</a>
b663: bd 8e b6                           lda     <a href="#Symsample_data_1">sample_data_1</a>,x         ;delay between speaker clicks
b666: f0 09                              beq     @rts                    ;or terminate on 0
b668: 38           @dec                  sec
b669: e9 01                              sbc     #$01
b66b: d0 fb                              bne     @dec
b66d: e8                                 inx
b66e: 4c 60 b6                           jmp     @click

b671: 60           @rts                  rts

b672: 1e           <a name="Symsound_data_Y">sound_data_Y</a>          .dd1    $1e
b673: 3c                                 .dd1    $3c
b674: ff                                 .dd1    $ff
b675: ff                                 .dd1    $ff
b676: ff                                 .dd1    $ff
b677: ff                                 .dd1    $ff
b678: 1e                                 .dd1    $1e
b679: 64                                 .dd1    $64
b67a: 0a                                 .dd1    $0a
b67b: 00                                 .dd1    $00
b67c: 3c                                 .dd1    $3c
b67d: 14                                 .dd1    $14
b67e: 3c                                 .dd1    $3c
b67f: 1e                                 .dd1    $1e
b680: 2f           <a name="Symsound_data_X">sound_data_X</a>          .dd1    $2f
b681: 72                                 .dd1    $72
b682: 00                                 .dd1    $00
b683: 00                                 .dd1    $00
b684: 00                                 .dd1    $00
b685: 00                                 .dd1    $00
b686: ce                                 .dd1    $ce
b687: d9                                 .dd1    $d9
b688: 23                                 .dd1    $23
b689: 00                                 .dd1    $00
b68a: 48                                 .dd1    $48
b68b: 23                                 .dd1    $23
b68c: 17                                 .dd1    $17
b68d: 1f                                 .dd1    $1f
b68e: 5f 20 3c 80+ <a name="Symsample_data_1">sample_data_1</a>         .bulk   5f203c8000              ;5 clicks with delay values

b693: a5 4a        <a name="Symplay_sound_0">play_sound_0</a>          lda     <a href="#SymSOUNDFLG">SOUNDFLG</a>                ;is sound on?
b695: d0 06                              bne     <a href="#Symtry_play_sound_0">try_play_sound_0</a>        ;yes, play it
b697: a2 64                              ldx     #$64                    ;no, delay (somewhat longer)
b699: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
b69c: 60                                 rts

                   ; This plays sound 0 as long as $39 is not #$FF, and always sets $39 to 0. It is
                   ; set to $FF on inventory menu entry (eating, selling, buying) in order to
                   ; suppress the beep that normally occurs during item display.
b69d: a5 39        <a name="Symtry_play_sound_0">try_play_sound_0</a>      lda     <a href="#SymsuppressSound0">suppressSound0</a>          ;set to $FF when entering sell, buy or similar menu
b69f: 30 05                              bmi     @notqueued
b6a1: a2 00                              ldx     #$00
b6a3: 20 45 b6                           jsr     <a href="#Symplay_sound">play_sound</a>              ;play sound 0 (X=0)
b6a6: a2 a0        @notqueued            ldx     #$a0
b6a8: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>
b6ab: a9 00                              lda     #$00
b6ad: 85 39                              sta     <a href="#SymsuppressSound0">suppressSound0</a>
b6af: 60                                 rts

b6b0: c8           @next_addrtbl         iny
b6b1: f0 01                              beq     @inc_addrtbl_hi
b6b3: 60                                 rts

b6b4: e6 4f        @inc_addrtbl_hi       inc     addrtbl+1
b6b6: 60                                 rts

                   ; Appears to play a note or sound based on values in X and Y
                   ytmp                  .var    $4b    {addr/1}
                   xtmp                  .var    $4c    {addr/1}

b6b7: 86 4c        <a name="Symplay_tone">play_tone</a>             stx     xtmp
b6b9: 84 4b                              sty     ytmp
b6bb: a0 00                              ldy     #$00
b6bd: ad 30 c0     @click                lda     <a href="#SymSPKR">SPKR</a>
b6c0: 88           <a name="SymLB6C0">LB6C0</a>                 dey
b6c1: d0 04                              bne     <a href="#SymLB6C7">LB6C7</a>
b6c3: c6 4b                              dec     ytmp
b6c5: f0 08                              beq     @rts
b6c7: ca           <a name="SymLB6C7">LB6C7</a>                 dex
b6c8: d0 f6                              bne     <a href="#SymLB6C0">LB6C0</a>
b6ca: a6 4c                              ldx     xtmp
b6cc: 4c bd b6                           jmp     @click

b6cf: 60           @rts                  rts

                   ; Delay loop -- will delay A * A times. A is 0 on exit.
b6d0: 38           <a name="SymdelayAA">delayAA</a>               sec
b6d1: 48           @dec                  pha
b6d2: e9 01        @dec2                 sbc     #$01
b6d4: d0 fc                              bne     @dec2
b6d6: 68                                 pla
b6d7: e9 01                              sbc     #$01
b6d9: d0 f6                              bne     @dec
b6db: 60                                 rts

                   ; Checks for a latched keypress and returns it both in A and in $02; returns
                   ; #$00 if no key was pressed. This only works for uppercase ($C0-DF), control
                   ; chars ($80-9F), and spacebar ($A0). Lowercase is treated as uppercase, numbers
                   ; and punctuation generally convert to control chars.
                   ; 
                   ; There is a tiny delay before checking for keypress. This routine is used
                   ; during gameplay and this delay affects (subtly) how fast the game plays. Set
                   ; to $01 and the game plays a smidge faster, to $60 and you walk pretty slow.
b6dc: a2 0c        <a name="Symchkkey">chkkey</a>                ldx     #$0c                    ;called from B609 vector
b6de: 20 12 60                           jsr     <a href="#SymGAME2_delay1">GAME2_delay1</a>            ;delay
b6e1: ad 00 c0                           lda     <a href="#SymKBD">KBD</a>                     ;read key and clear strobe
b6e4: 8d 10 c0                           sta     <a href="#SymKBDSTRB">KBDSTRB</a>
b6e7: 10 0b                              bpl     @nokey                  ;if high bit unset, no keypress
b6e9: 29 df                              and     #$df                    ;convert to uppercase
b6eb: c9 80                              cmp     #$80                    ;is it a space?
b6ed: d0 02                              bne     @done                   ;no, return verbatim
b6ef: 09 20                              ora     #$20                    ;yes, promote to $A0
b6f1: 85 02        @done                 sta     <a href="#SymLASTKEY">LASTKEY</a>
b6f3: 60                                 rts

b6f4: a9 00        @nokey                lda     #$00                    ;no keypress, return $00
b6f6: 85 02                              sta     <a href="#SymLASTKEY">LASTKEY</a>
b6f8: 60                                 rts

b6f9: f0 10 e8 e4+                       .junk   7

                                         .org    $0900
                   <span style="background-color: #72be72">NOTE: This page gets copied to $0900 during setup, but is not code.</span>
0900: ff a5 61 bd+ <a name="SymSCREEN_0900">SCREEN_0900</a>           .bulk   ffa561bdf968c695256779a8d04edec7
0910: 7a 27 f6 57+                       .bulk   7a27f657b8f880a6dc691aa44debbc14
0920: a3 76 5f dd+                       .bulk   a3765fdd3aec9775fba99858feb54c96
0930: 01 4b 24 c5+                       .bulk   014b24c52fa777cf39070856d14ff562
0940: df 1e 6d 99+                       .bulk   df1e6d99ee1923a26622602e4a45306a
0950: 1d e1 5e 46+                       .bulk   1de15e467b2974013bed50aa65ce7f31
0960: 32 0d 94 00+                       .bulk   320d9400388afab781bee90ee2289a8e
0970: f4 40 6e 18+                       .bulk   f4406e18db0647c30c78ea5513b66b05
0980: c2 b9 c9 0a+                       .bulk   c2b9c90a63ef6cd5516ebb4871211b37
0990: 2d 96 2c 5d+                       .bulk   2d962c5d124487268c3cac8f1752ab7c
09a0: da 33 78 93+                       .bulk   da33789302cd1c72c8098d34d2ad0f9b
09b0: e3 53 e7 3d+                       .bulk   e353e73d64d93fcc897e03c420888b0a
09c0: ae 2b 6f 82+                       .bulk   ae2b6f82d82a54c086f0901ff37dfd49
09d0: a1 04 a0 b4+                       .bulk   a104a0b4350bb97043c19c10e69de33e
09e0: be cb b3 91+                       .bulk   becbb391ffb4e5a016d636af9e42d311
09f0: b0 e4 85 b1+                       .bulk   b0e485b141b2f1f75bfc92f259baaacf

                                         .org    $5b00
                   ********************************************************************************
                   * Copy SCREEN from $4000..$6000 into high memory at $9600..$B600, $5900..FF to *
                   * $B600, and $5A00..FF to $0900, to free up hires screen 2. Prompt the user to *
                   * insert disk side 2, then clear the logo.                                     *
                   *                                                                              *
                   * Continue execution in high memory at $A846.                                  *
                   *                                                                              *
                   * Note that $AF00 is a copy of $B600, and $B000 is a copy of $0900.            *
                   ********************************************************************************
5b00: 4c 03 5b     <a name="Symsetup">setup</a>                 jmp     <a href="#Symsetup1">setup1</a>

5b03: 20 15 60     <a name="Symsetup1">setup1</a>                jsr     <a href="#SymGAME2_swapzp8">GAME2_swapzp8</a>           ;Save zero page to $800
5b06: a9 00                              lda     #$00                    ; (page zero)
5b08: a2 01                              ldx     #$01                    ; (one page)
5b0a: 20 33 60                           jsr     <a href="#SymGAME2_clearpages">GAME2_clearpages</a>        ;Clear zero page
5b0d: a9 02                              lda     #$02
5b0f: 85 13                              sta     $13                     ;?
5b11: a9 01                              lda     #$01
5b13: 85 4a                              sta     <a href="#SymSOUNDFLG">SOUNDFLG</a>                ;?
5b15: a9 40                              lda     #$40                    ;Src page $40
5b17: a2 20                              ldx     #$20                    ;for $20 pages
5b19: a0 96                              ldy     #$96                    ;Dst page $96
5b1b: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>         ;Copy $4000..$5FFF to $9600..B5FF
5b1e: a9 59                              lda     #$59
5b20: a2 01                              ldx     #$01
5b22: a0 b6                              ldy     #$b6
                   <span style="background-color: #72be72">NOTE: $AF00 and $B600 are now duplicate pages.</span>
5b24: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>         ;Copy $5900..$59FF to $B600..B6FF
                   ; Clear bit 7 and set bit 6 for the text string insert_side_2, making it flash.
5b27: a2 1c                              ldx     #$1c                    ;len $1D bytes (BPL)
5b29: bd ab 5b     @loop                 lda     <a href="#Syminsert_side_2">insert_side_2</a>,x
5b2c: 29 7f                              and     #$7f
5b2e: 09 40                              ora     #$40
5b30: 9d ab 5b                           sta     <a href="#Syminsert_side_2">insert_side_2</a>,x
5b33: ca                                 dex
5b34: 10 f3                              bpl     @loop                   ;when x &gt;= 0
                   ; Copy 4 lines (40*4 bytes) from side_2_msg to text screen lines 20-23. The text
                   ; addresses are hardcoded ($650,$6d0,$750,$7d0).
                   src                   .var    $03    {addr/2}
                   lines                 .var    $08    {addr/1}         ;# of lines copied
                   dst                   .var    $11    {addr/2}

5b36: a9 a6                              lda     #&lt;<a href="#Symside_2_msg">side_2_msg</a>
5b38: 85 03                              sta     src
5b3a: a9 5b                              lda     #&gt;<a href="#Symside_2_msg">side_2_msg</a>
5b3c: 85 04                              sta     src+1
5b3e: a2 00                              ldx     #$00
5b40: 86 08                              stx     lines
5b42: bd 9e 5b     <a name="Symwriteln">writeln</a>               lda     <a href="#Symtextbotlo">textbotlo</a>,x             ;Pointer to text line addresses
5b45: 85 11                              sta     dst
5b47: bd a2 5b                           lda     <a href="#Symtextbothi">textbothi</a>,x
5b4a: 85 12                              sta     dst+1
5b4c: a0 00                              ldy     #$00
5b4e: a2 00                              ldx     #$00
5b50: a1 03        @line                 lda     (src,x)                 ;Copy byte to screen
5b52: 91 11                              sta     (dst),y
5b54: e6 03                              inc     src
5b56: d0 02                              bne     @next
5b58: e6 04                              inc     src+1                   ;src high byte wrapped
5b5a: c8           @next                 iny
5b5b: c0 28                              cpy     #$28                    ;40 chars copied?
5b5d: d0 f1                              bne     @line                   ;no, stay on this line
5b5f: e6 08                              inc     lines
5b61: a6 08                              ldx     lines
5b63: e0 04                              cpx     #$04                    ;did we write 4 lines yet?
5b65: d0 db                              bne     <a href="#Symwriteln">writeln</a>                 ;no, write next line
5b67: 20 27 6b     @key                  jsr     <a href="#SymGAME2_chkkey">GAME2_chkkey</a>            ;get keypress in A
5b6a: f0 fb                              beq     @key                    ;until a key is pressed
5b6c: a2 01                              ldx     #$01                    ;joystick flag (01)
5b6e: c9 ca                              cmp     #‘J’ | $80
5b70: f0 06                              beq     @jkflag                 ;J pressed, store flag
5b72: a2 00                              ldx     #$00                    ;keyboard flag (00)
5b74: c9 cb                              cmp     #‘K’ | $80
5b76: d0 ef                              bne     @key                    ;invalid key, retry
5b78: 86 b1        @jkflag               stx     <a href="#SymJOYFLG">JOYFLG</a>                  ;01 = Joystick, 00 = Keyboard
5b7a: a9 5a                              lda     #$5a
5b7c: a2 01                              ldx     #$01
5b7e: a0 09                              ldy     #$09
5b80: 20 30 60                           jsr     <a href="#SymGAME2_copypages">GAME2_copypages</a>         ;Copy $5A00..$5AFF to $0900..$09FF.
                   ; Clear GR lines 1-20 to black, removing logo.
5b83: a2 13                              ldx     #$13                    ;lines 1-20
5b85: bd 46 5c     @clrline              lda     <a href="#Symtextlo">textlo</a>,x
5b88: 85 11                              sta     dst
5b8a: bd 5e 5c                           lda     <a href="#Symtexthi">texthi</a>,x
5b8d: 85 12                              sta     dst+1
5b8f: a0 27                              ldy     #$27                    ;clear 40-char line
5b91: a9 00                              lda     #$00
5b93: 91 11        @clrchar              sta     (dst),y
5b95: 88                                 dey
5b96: 10 fb                              bpl     @clrchar
5b98: ca                                 dex
5b99: 10 ea                              bpl     @clrline
5b9b: 4c 46 a8                           jmp     <a href="#Symstart_vec">start_vec</a>               ;continue in high memory

                   ; Addresses for last 4 lines of text page 1. Note these are included in the 24
                   ; lines of textlo/hi, so this is redundant.
5b9e: 50           <a name="Symtextbotlo">textbotlo</a>             .dd1    $50
5b9f: d0                                 .dd1    $d0
5ba0: 50                                 .dd1    $50
5ba1: d0                                 .dd1    $d0
5ba2: 06           <a name="Symtextbothi">textbothi</a>             .dd1    $06
5ba3: 06                                 .dd1    $06
5ba4: 07                                 .dd1    $07
5ba5: 07                                 .dd1    $07
                   ; 40*4 bytes (4 lines) of text for side 2 &amp; press K/J msg etc. 
5ba6: a0 a0 a0 a0+ <a name="Symside_2_msg">side_2_msg</a>            .str    ↑“     ”
5bab: a0 a0 c9 a0+ <a name="Syminsert_side_2">insert_side_2</a>         .str    ↑“  I N S E R T   S I D E   2  ”
5bc8: a0 a0 a0 a0+                       .str    ↑“                                                    PRESS 'K'”
                                          +      “ FOR KEYBOARD GAME             PRESS 'J' FOR JOYSTICK GAME    ”
                                          +      “   ”
                   ; Addresses for the 24 lines on text page 1.
5c46: 00 80 00 80+ <a name="Symtextlo">textlo</a>                .bulk   008000800080008028a828a828a828a8
5c56: 50 d0 50 d0+                       .bulk   50d050d050d050d0
5c5e: 04 04 05 05+ <a name="Symtexthi">texthi</a>                .bulk   04040505060607070404050506060707
5c6e: 04 04 05 05+                       .bulk   0404050506060707

                                         .org    $f000
                   ********************************************************************************
                   * The rest of this file is junk. There is some unused code, followed by source *
                   * code/variable names, which we've seen several times in other junk areas.     *
                   *                                                                              *
                   * We set org arbitrarily outside the $B200-$B5FF area, since we handle these   *
                   * game storage areas in a project symbol file; otherwise this junk data would  *
                   * take precedence in operands.                                                 *
                   ********************************************************************************
f000: 00 85 af 85+                       .junk   123
                   <span style="background-color: #cbcb00">NOTE: Example variable names can be found in this junk area</span>
f07b: 20 21 60 c9+                       .junk   783
</pre>


    </div>

    <!-- SymbolTable is optional; remove this entire section from the template if you don't want it -->
    <div id="symbol-table">
        <h2>Symbol Table</h2>
<table>
  <tr><td><a href="#SymSCREEN_0900">SCREEN_0900</a></td><td><code>$0900</code></td></tr>
  <tr><td><a href="#SymSCRN_buy">SCRN_buy</a></td><td><code>$9c12</code></td></tr>
  <tr><td><a href="#SymSCRN_chkkey">SCRN_chkkey</a></td><td><code>$b609</code></td></tr>
  <tr><td><a href="#SymSCRN_demo_handler">SCRN_demo_handler</a></td><td><code>$9600</code></td></tr>
  <tr><td><a href="#SymSCRN_drawtile_store">SCRN_drawtile_store</a></td><td><code>$9c1b</code></td></tr>
  <tr><td><a href="#SymSCRN_grunspreke">SCRN_grunspreke</a></td><td><code>$9c03</code></td></tr>
  <tr><td><a href="#SymSCRN_heal">SCRN_heal</a></td><td><code>$9c00</code></td></tr>
  <tr><td><a href="#SymSCRN_kiniport">SCRN_kiniport</a></td><td><code>$9c06</code></td></tr>
  <tr><td><a href="#SymSCRN_offer">SCRN_offer</a></td><td><code>$9c18</code></td></tr>
  <tr><td><a href="#SymSCRN_pense">SCRN_pense</a></td><td><code>$9c0f</code></td></tr>
  <tr><td><a href="#SymSCRN_play_melody">SCRN_play_melody</a></td><td><code>$b600</code></td></tr>
  <tr><td><a href="#SymSCRN_play_sound">SCRN_play_sound</a></td><td><code>$b603</code></td></tr>
  <tr><td><a href="#SymSCRN_play_sound_0">SCRN_play_sound_0</a></td><td><code>$b606</code></td></tr>
  <tr><td><a href="#SymSCRN_sell">SCRN_sell</a></td><td><code>$9c15</code></td></tr>
  <tr><td><a href="#SymSCRN_show_demo_text">SCRN_show_demo_text</a></td><td><code>$9603</code></td></tr>
  <tr><td><a href="#SymSCRN_sound_status">SCRN_sound_status</a></td><td><code>$a849</code></td></tr>
  <tr><td><a href="#SymSCRN_speak">SCRN_speak</a></td><td><code>$9c0c</code></td></tr>
  <tr><td><a href="#SymSCRN_triumph_melody">SCRN_triumph_melody</a></td><td><code>$9c1e</code></td></tr>
  <tr><td><a href="#SymSCRN_use">SCRN_use</a></td><td><code>$9c09</code></td></tr>
  <tr><td><a href="#SymSCRN_warm_start">SCRN_warm_start</a></td><td><code>$a840</code></td></tr>
</table>

    </div>

    <div id="footer">
        <hr/>
        <p>HTML generated by <a href="https://6502bench.com/">6502bench SourceGen</a> v1.7.3
        on 2021/12/18 <!--00:30:47 -06:00--></p>
        <p>Expression style: Common</p>
        <!-- parameters: cols=22,8,24,100;extraCols=Address,Bytes;byteSpc=True;commaBulk=False;nonuPfx='@';varPfx='';labelBrk=True;notes=True;gfx=True;opWrap=64 -->
    </div>
</body>
</html>
